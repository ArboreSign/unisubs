{% extends "base.html" %}
{% load i18n teams_tags paginator doorman media_compressor verbatim_templatetag %}

{% block scripts %}
    {{ block.super }}
    <script type="text/javascript">
        jQuery(function($){
            $('#id_logo').change(function(){
                $('.edit-team').ajaxSubmit({
                    url: '{% url teams:edit_logo team.slug %}',
                    dataType: 'json',
                    success: function(response){
                        if (response.error){
                            $('#logo-errors').html('<ul class="errorlist"><li>'+response.error.logo+'</li></ul>');
                        }else{
                            $('#logo-errors').html('');  
                            $('.team-logo').attr('src', response.url);
                        }
                    },
                    beforeSubmit: function(arr, $form, options) { 
                        $('#logo-errors').html('Saving...');            
                    }                    
                });
            });            
        });
    </script>
 {% include_bundle "js-teams-settings-panel" 0 %}
    <script src="{% url teams:rpc_api %}" type="text/javascript"></script>
{% endblock %}



{% block body_attrs %}class="new-teams"{% endblock %}

{% block title %}
    {{ team }} {% trans 'Settings' %} | Universal Subtitles
{% endblock %}

{% block main_content %}
    <div class="hd">
        <h2>{{ team.name }}</h2>
        {% with "settings" as active %}
            {% include 'teams/_edit_top_navigation.html' %}
        {% endwith %}
    </div>

    <div class="panel-holder grid_9 alpha">
      <div class="tab panel-projects" style="display:none">
      </div>
      {% include "teams/_basic_settings.html" %}

    </div>

    <div class=" grid_3 omega ">
      <ul class="view-filter sub-settings-panel">
      </ul>
    </div>
      
    
<script>
$(window).load(function(){
    //findme
    {% include "teams/settings-panel.js" %}
});
</script>

<!-- templates -->
<script id="IMAGE_PRELOADER" type="text/html">
  <img  width="256" height1="30" src="{{ STATIC_URL }}images/ajax-loader.gif"/>
</script>
{% comment %}  Whatever is inside the verbatim tag does not run through
django's var subtitution, so the final template is render as it's written bellow.
This is needed, since it's for the js templating
{% endcomment %}
{% verbatim %}

<script id="subMenuItem" type="text/html">
  <li><a >{{label}}</a></li>
</script>

<script id="projectPanel" type="text/html">
  <div class="panel-project">
    <a  class="button project-add">Add Project</a>
    <ul class="projects listing">
    </ul>
  </div>
</script>

<script id="projectEditPanel" type="text/html">
  <div class="project-edit-panel">
    <form action="#">
      <label for="name">Name</label>
      <input type="text" name="name" value="{{name}}"/>
      
      <label for="name">Description</label>
      <textarea  name="description">{{description}}</textarea>
      <input type="hidden" value='{{pk}}' name="pk"/>  
      <input type="hidden" value='{{order}}' name="order"/>  
      <input type="hidden" value='{{slug}}' name="slug"/>  
      <a class="red_button project-delete">Delete</a>a
      <a class="blue_button project-save">Save</a>
    </form>
</div>
</script>

<script id="projectListItem" type="text/html">
  <li>
    <p>{{name}}</p>
    <ul class="actions">
      <li>
        <a class="action-edit" href="#">Edit</a>
      </li>
    </ul>
  </li>
</script>

{% endverbatim %}
{% endblock %}
