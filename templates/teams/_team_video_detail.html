{% load i18n teams_tags %}

<li>
  <h3>
    <a href="{% url videos:video video_id=search_record.video_id %}">{{ search_record.title|truncatewords:9 }}</a>
    {% if search_record.project_name != "_root" %}
        <span class="descriptor">{{ search_record.project_name }}</span>
    {% endif %}
  </h3>

  <p>
    {% if search_record.description %}
      {{ search_record.description|truncatewords:20|urlize }}.
    {% endif %}
  </p>
  <a href="{% url teams:team_video team_video_pk=search_record.team_video_pk %}" class="thumb"><img src="{{ search_record.thumbnail }}" alt="{{ search_record.title }} thumbnail"></a>
  <ul class="actions">
      <li>
          <h4>
              {% if search_record.video_completed_langs %}
                  <a href="{% url videos:video video_id=search_record.video_id %}">{{ search_record.video_completed_langs|length }} language{{ search_record.video_completed_langs|length|pluralize }}</a>
              {% else %}
                {% trans "No subtitles yet" %}
              {% endif %}
          </h4>
      </li>
      <li>
        <a href="#" class="team_video_{{ search_record.team_video_pk }}">Add subtitles</a>
      </li>
  </ul>

  {% if can_edit_video %}
    <ul class="admin-controls">
      <li>
        <input type="checkbox"/>
      </li>
      <li>
        <a href="{% url teams:team_video team_video_pk=search_record.team_video_pk %}">Edit</a>
      </li>
      <li>
          <a href="{% url teams:create_task slug=team.slug team_video_pk=search_record.team_video_pk %}">New Task</a>
      </li>
      <li>
        <a href="">Remove</a>
      </li>
    </ul>
  {% endif %}

  <script type="text/javascript">
      $('a.team_video_{{ search_record.team_video_pk }}').click(function(){
          unisubs.api.openUnisubsDialogOnsite(
              '{{search_record.video_id}}',
              '{{search_record.video_url}}',
              GLOBAL_WIDGET_SETTINGS);
          return false;
      });
  </script>
</li>
