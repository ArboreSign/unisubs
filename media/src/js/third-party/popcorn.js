/*
 * popcorn.js version 5f34b14
 * http://popcornjs.org
 *
 * Copyright 2011, Mozilla Foundation
 * Licensed under the MIT license
 */

(function(p,g){function m(a,d){return function(){if(e.plugin.debug)return a.apply(this,arguments);try{return a.apply(this,arguments)}catch(j){e.plugin.errors.push({plugin:d,thrown:j,source:a.toString()});this.emit("pluginerror",e.plugin.errors)}}}if(g.addEventListener){var b=Array.prototype,c=Object.prototype,f=b.forEach,h=b.slice,i=c.hasOwnProperty,k=c.toString,r=p.Popcorn,n=[],l=false,q={events:{hash:{},apis:{}}},u=function(){return p.requestAnimationFrame||p.webkitRequestAnimationFrame||p.mozRequestAnimationFrame||
p.oRequestAnimationFrame||p.msRequestAnimationFrame||function(a){p.setTimeout(a,16)}}(),e=function(a,d){return new e.p.init(a,d||null)};e.version="5f34b14";e.isSupported=true;e.instances=[];e.p=e.prototype={init:function(a,d){var j,o=this;if(typeof a==="function")if(g.readyState==="complete")a(g,e);else{n.push(a);if(!l){l=true;var s=function(){g.removeEventListener("DOMContentLoaded",s,false);for(var B=0,F=n.length;B<F;B++)n[B].call(g,e);n=null};g.addEventListener("DOMContentLoaded",s,false)}}else{if(typeof a===
"string")try{j=g.querySelector(a)}catch(x){throw Error("Popcorn.js Error: Invalid media element selector: "+a);}this.media=j||a;j=this.media.nodeName&&this.media.nodeName.toLowerCase()||"video";this[j]=this.media;this.options=d||{};this.id=this.options.id||e.guid(j);if(e.byId(this.id))throw Error("Popcorn.js Error: Cannot use duplicate ID ("+this.id+")");this.isDestroyed=false;this.data={running:{cue:[]},timeUpdate:e.nop,disabled:{},events:{},hooks:{},history:[],state:{volume:this.media.volume},trackRefs:{},
trackEvents:{byStart:[{start:-1,end:-1}],byEnd:[{start:-1,end:-1}],animating:[],startIndex:0,endIndex:0,previousUpdateTime:-1}};e.instances.push(this);var w=function(){if(o.media.currentTime<0)o.media.currentTime=0;o.media.removeEventListener("loadeddata",w,false);var B,F,C,D,t;B=o.media.duration;B=B!=B?Number.MAX_VALUE:B+1;e.addTrackEvent(o,{start:B,end:B});if(o.options.frameAnimation){o.data.timeUpdate=function(){e.timeUpdate(o,{});e.forEach(e.manifest,function(y,I){if(F=o.data.running[I]){D=F.length;
for(var G=0;G<D;G++){C=F[G];(t=C._natives)&&t.frame&&t.frame.call(o,{},C,o.currentTime())}}});o.emit("timeupdate");!o.isDestroyed&&u(o.data.timeUpdate)};!o.isDestroyed&&u(o.data.timeUpdate)}else{o.data.timeUpdate=function(y){e.timeUpdate(o,y)};o.isDestroyed||o.media.addEventListener("timeupdate",o.data.timeUpdate,false)}};Object.defineProperty(this,"error",{get:function(){return o.media.error}});o.media.readyState>=2?w():o.media.addEventListener("loadeddata",w,false);return this}}};e.p.init.prototype=
e.p;e.byId=function(a){for(var d=e.instances,j=d.length,o=0;o<j;o++)if(d[o].id===a)return d[o];return null};e.forEach=function(a,d,j){if(!a||!d)return{};j=j||this;var o,s;if(f&&a.forEach===f)return a.forEach(d,j);if(k.call(a)==="[object NodeList]"){o=0;for(s=a.length;o<s;o++)d.call(j,a[o],o,a);return a}for(o in a)i.call(a,o)&&d.call(j,a[o],o,a);return a};e.extend=function(a){var d=h.call(arguments,1);e.forEach(d,function(j){for(var o in j)a[o]=j[o]});return a};e.extend(e,{noConflict:function(a){if(a)p.Popcorn=
r;return e},error:function(a){throw Error(a);},guid:function(a){e.guid.counter++;return(a?a:"")+(+new Date+e.guid.counter)},sizeOf:function(a){var d=0,j;for(j in a)d++;return d},isArray:Array.isArray||function(a){return k.call(a)==="[object Array]"},nop:function(){},position:function(a){a=a.getBoundingClientRect();var d={},j=g.documentElement,o=g.body,s,x,w;s=j.clientTop||o.clientTop||0;x=j.clientLeft||o.clientLeft||0;w=p.pageYOffset&&j.scrollTop||o.scrollTop;j=p.pageXOffset&&j.scrollLeft||o.scrollLeft;
s=Math.ceil(a.top+w-s);x=Math.ceil(a.left+j-x);for(var B in a)d[B]=Math.round(a[B]);return e.extend({},d,{top:s,left:x})},disable:function(a,d){if(!a.data.disabled[d]){a.data.disabled[d]=true;for(var j=a.data.running[d].length-1,o;j>=0;j--){o=a.data.running[d][j];o._natives.end.call(a,null,o)}}return a},enable:function(a,d){if(a.data.disabled[d]){a.data.disabled[d]=false;for(var j=a.data.running[d].length-1,o;j>=0;j--){o=a.data.running[d][j];o._natives.start.call(a,null,o)}}return a},destroy:function(a){var d=
a.data.events,j=a.data.trackEvents,o,s,x,w;for(s in d){o=d[s];for(x in o)delete o[x];d[s]=null}for(w in e.registryByName)e.removePlugin(a,w);j.byStart.length=0;j.byEnd.length=0;if(!a.isDestroyed){a.data.timeUpdate&&a.media.removeEventListener("timeupdate",a.data.timeUpdate,false);a.isDestroyed=true}}});e.guid.counter=1;e.extend(e.p,function(){var a={};e.forEach("load play pause currentTime playbackRate volume duration preload playbackRate autoplay loop controls muted buffered readyState seeking paused played seekable ended".split(/\s+/g),
function(d){a[d]=function(j){var o;if(typeof this.media[d]==="function"){if(j!=null&&/play|pause/.test(d))this.media.currentTime=e.util.toSeconds(j);this.media[d]();return this}if(j!=null){o=this.media[d];this.media[d]=j;o!==j&&this.emit("attrchange",{attribute:d,previousValue:o,currentValue:j});return this}return this.media[d]}});return a}());e.forEach("enable disable".split(" "),function(a){e.p[a]=function(d){return e[a](this,d)}});e.extend(e.p,{roundTime:function(){return Math.round(this.media.currentTime)},
exec:function(a,d,j){var o=arguments.length,s,x;try{x=e.util.toSeconds(a)}catch(w){}if(typeof x==="number")a=x;if(typeof a==="number"&&o===2){j=d;d=a;a=e.guid("cue")}else if(o===1)d=-1;else if(s=this.getTrackEvent(a)){if(typeof a==="string"&&o===2){if(typeof d==="number")j=s._natives.start;if(typeof d==="function"){j=d;d=s.start}}}else if(o>=2){if(typeof d==="string"){try{x=e.util.toSeconds(d)}catch(B){}d=x}if(typeof d==="number")j=j||e.nop();if(typeof d==="function"){j=d;d=-1}}e.addTrackEvent(this,
{id:a,start:d,end:d+1,_running:false,_natives:{start:j||e.nop,end:e.nop,type:"cue"}});return this},mute:function(a){a=a==null||a===true?"muted":"unmuted";if(a==="unmuted"){this.media.muted=false;this.media.volume=this.data.state.volume}if(a==="muted"){this.data.state.volume=this.media.volume;this.media.muted=true}this.emit(a);return this},unmute:function(a){return this.mute(a==null?false:!a)},position:function(){return e.position(this.media)},toggle:function(a){return e[this.data.disabled[a]?"enable":
"disable"](this,a)},defaults:function(a,d){if(e.isArray(a)){e.forEach(a,function(j){for(var o in j)this.defaults(o,j[o])},this);return this}if(!this.options.defaults)this.options.defaults={};this.options.defaults[a]||(this.options.defaults[a]={});e.extend(this.options.defaults[a],d);return this}});e.Events={UIEvents:"blur focus focusin focusout load resize scroll unload",MouseEvents:"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave click dblclick",Events:"loadstart progress suspend emptied stalled play pause error loadedmetadata loadeddata waiting playing canplay canplaythrough seeking seeked timeupdate ended ratechange durationchange volumechange"};
e.Events.Natives=e.Events.UIEvents+" "+e.Events.MouseEvents+" "+e.Events.Events;q.events.apiTypes=["UIEvents","MouseEvents","Events"];(function(a,d){for(var j=q.events.apiTypes,o=a.Natives.split(/\s+/g),s=0,x=o.length;s<x;s++)d.hash[o[s]]=true;j.forEach(function(w){d.apis[w]={};for(var B=a[w].split(/\s+/g),F=B.length,C=0;C<F;C++)d.apis[w][B[C]]=true})})(e.Events,q.events);e.events={isNative:function(a){return!!q.events.hash[a]},getInterface:function(a){if(!e.events.isNative(a))return false;var d=
q.events,j=d.apiTypes;d=d.apis;for(var o=0,s=j.length,x,w;o<s;o++){w=j[o];if(d[w][a]){x=w;break}}return x},all:e.Events.Natives.split(/\s+/g),fn:{trigger:function(a,d){var j;if(this.data.events[a]&&e.sizeOf(this.data.events[a])){if(j=e.events.getInterface(a)){j=g.createEvent(j);j.initEvent(a,true,true,p,1);this.media.dispatchEvent(j);return this}e.forEach(this.data.events[a],function(o){o.call(this,d)},this)}return this},listen:function(a,d){var j=this,o=true,s=e.events.hooks[a],x;if(!this.data.events[a]){this.data.events[a]=
{};o=false}if(s){s.add&&s.add.call(this,{},d);if(s.bind)a=s.bind;if(s.handler){x=d;d=function(w){s.handler.call(j,w,x)}}o=true;if(!this.data.events[a]){this.data.events[a]={};o=false}}this.data.events[a][d.name||d.toString()+e.guid()]=d;!o&&e.events.all.indexOf(a)>-1&&this.media.addEventListener(a,function(w){e.forEach(j.data.events[a],function(B){typeof B==="function"&&B.call(j,w)})},false);return this},unlisten:function(a,d){if(this.data.events[a]&&this.data.events[a][d]){delete this.data.events[a][d];
return this}this.data.events[a]=null;return this}},hooks:{canplayall:{bind:"canplaythrough",add:function(a,d){var j=false;if(this.media.readyState){d.call(this,a);j=true}this.data.hooks.canplayall={fired:j}},handler:function(a,d){if(!this.data.hooks.canplayall.fired){d.call(this,a);this.data.hooks.canplayall.fired=true}}}}};e.forEach([["trigger","emit"],["listen","on"],["unlisten","off"]],function(a){e.p[a[0]]=e.p[a[1]]=e.events.fn[a[0]]});e.addTrackEvent=function(a,d){var j,o;if(d.id)j=a.getTrackEvent(d.id);
if(j){o=true;d=e.extend({},j,d);a.removeTrackEvent(d.id)}if(d&&d._natives&&d._natives.type&&a.options.defaults&&a.options.defaults[d._natives.type])d=e.extend({},a.options.defaults[d._natives.type],d);if(d._natives){d._id=d.id||d._id||e.guid(d._natives.type);a.data.history.push(d._id)}d.start=e.util.toSeconds(d.start,a.options.framerate);d.end=e.util.toSeconds(d.end,a.options.framerate);var s=a.data.trackEvents.byStart,x=a.data.trackEvents.byEnd,w;for(w=s.length-1;w>=0;w--)if(d.start>=s[w].start){s.splice(w+
1,0,d);break}for(s=x.length-1;s>=0;s--)if(d.end>x[s].end){x.splice(s+1,0,d);break}if(d.end>a.media.currentTime&&d.start<=a.media.currentTime){d._running=true;a.data.running[d._natives.type].push(d);a.data.disabled[d._natives.type]||d._natives.start.call(a,null,d)}w<=a.data.trackEvents.startIndex&&d.start<=a.data.trackEvents.previousUpdateTime&&a.data.trackEvents.startIndex++;s<=a.data.trackEvents.endIndex&&d.end<a.data.trackEvents.previousUpdateTime&&a.data.trackEvents.endIndex++;this.timeUpdate(a,
null,true);d._id&&e.addTrackEvent.ref(a,d);if(o){o=d._natives.type==="cue"?"cuechange":"trackchange";a.emit(o,{id:d.id,previousValue:{time:j.start,fn:j._natives.start},currentValue:{time:d.start,fn:d._natives.start}})}else d._natives&&a.emit("trackadded",e.extend({},d,{plugin:d._natives.type,type:"trackadded"}))};e.addTrackEvent.ref=function(a,d){a.data.trackRefs[d._id]=d;return a};e.removeTrackEvent=function(a,d){for(var j,o,s=a.data.history.length,x=a.data.trackEvents.byStart.length,w=0,B=0,F=[],
C=[],D=[],t=[],y;--x>-1;){j=a.data.trackEvents.byStart[w];o=a.data.trackEvents.byEnd[w];if(!j._id){F.push(j);C.push(o)}if(j._id){j._id!==d&&F.push(j);o._id!==d&&C.push(o);if(j._id===d){B=w;y=j;j._natives._teardown&&j._natives._teardown.call(a,j)}}w++}x=a.data.trackEvents.animating.length;w=0;if(x)for(;--x>-1;){j=a.data.trackEvents.animating[w];j._id||D.push(j);j._id&&j._id!==d&&D.push(j);w++}B<=a.data.trackEvents.startIndex&&a.data.trackEvents.startIndex--;B<=a.data.trackEvents.endIndex&&a.data.trackEvents.endIndex--;
a.data.trackEvents.byStart=F;a.data.trackEvents.byEnd=C;a.data.trackEvents.animating=D;for(x=0;x<s;x++)a.data.history[x]!==d&&t.push(a.data.history[x]);a.data.history=t;e.removeTrackEvent.ref(a,d);y&&y._natives&&a.emit("trackremoved",e.extend({},y,{plugin:y._natives.type,type:"trackremoved"}))};e.removeTrackEvent.ref=function(a,d){delete a.data.trackRefs[d];return a};e.getTrackEvents=function(a){var d=[];a=a.data.trackEvents.byStart;for(var j=a.length,o=0,s;o<j;o++){s=a[o];s._id&&d.push(s)}return d};
e.getTrackEvents.ref=function(a){return a.data.trackRefs};e.getTrackEvent=function(a,d){return a.data.trackRefs[d]};e.getTrackEvent.ref=function(a,d){return a.data.trackRefs[d]};e.getLastTrackEventId=function(a){return a.data.history[a.data.history.length-1]};e.timeUpdate=function(a,d){var j=a.media.currentTime,o=a.data.trackEvents.previousUpdateTime,s=a.data.trackEvents,x=s.endIndex,w=s.startIndex,B=s.byStart.length,F=s.byEnd.length,C=e.registryByName,D,t,y;if(o<=j){for(;s.byEnd[x]&&s.byEnd[x].end<=
j;){D=s.byEnd[x];t=(o=D._natives)&&o.type;if(!o||C[t]||a[t]){if(D._running===true){D._running=false;y=a.data.running[t];y.splice(y.indexOf(D),1);if(!a.data.disabled[t]){o.end.call(a,d,D);a.emit("trackend",e.extend({},D,{plugin:t,type:"trackend"}))}}x++}else{e.removeTrackEvent(a,D._id);return}}for(;s.byStart[w]&&s.byStart[w].start<=j;){D=s.byStart[w];t=(o=D._natives)&&o.type;if(!o||C[t]||a[t]){if(D.end>j&&D._running===false){D._running=true;a.data.running[t].push(D);if(!a.data.disabled[t]){o.start.call(a,
d,D);a.emit("trackstart",e.extend({},D,{plugin:t,type:"trackstart"}))}}w++}else{e.removeTrackEvent(a,D._id);return}}}else if(o>j){for(;s.byStart[w]&&s.byStart[w].start>j;){D=s.byStart[w];t=(o=D._natives)&&o.type;if(!o||C[t]||a[t]){if(D._running===true){D._running=false;y=a.data.running[t];y.splice(y.indexOf(D),1);if(!a.data.disabled[t]){o.end.call(a,d,D);a.emit("trackend",e.extend({},D,{plugin:t,type:"trackend"}))}}w--}else{e.removeTrackEvent(a,D._id);return}}for(;s.byEnd[x]&&s.byEnd[x].end>j;){D=
s.byEnd[x];t=(o=D._natives)&&o.type;if(!o||C[t]||a[t]){if(D.start<=j&&D._running===false){D._running=true;a.data.running[t].push(D);if(!a.data.disabled[t]){o.start.call(a,d,D);a.emit("trackstart",e.extend({},D,{plugin:t,type:"trackstart"}))}}x--}else{e.removeTrackEvent(a,D._id);return}}}s.endIndex=x;s.startIndex=w;s.previousUpdateTime=j;s.byStart.length<B&&s.startIndex--;s.byEnd.length<F&&s.endIndex--};e.extend(e.p,{getTrackEvents:function(){return e.getTrackEvents.call(null,this)},getTrackEvent:function(a){return e.getTrackEvent.call(null,
this,a)},getLastTrackEventId:function(){return e.getLastTrackEventId.call(null,this)},removeTrackEvent:function(a){e.removeTrackEvent.call(null,this,a);return this},removePlugin:function(a){e.removePlugin.call(null,this,a);return this},timeUpdate:function(a){e.timeUpdate.call(null,this,a);return this},destroy:function(){e.destroy.call(null,this);return this}});e.manifest={};e.registry=[];e.registryByName={};e.plugin=function(a,d,j){if(e.protect.natives.indexOf(a.toLowerCase())>=0)e.error("'"+a+"' is a protected function name");
else{var o=["start","end"],s={},x=typeof d==="function",w=["_setup","_teardown","start","end","frame"],B=function(D,t){D=D||e.nop;t=t||e.nop;return function(){D.apply(this,arguments);t.apply(this,arguments)}};e.manifest[a]=j=j||d.manifest||{};w.forEach(function(D){d[D]=m(d[D]||e.nop,a)});var F=function(D,t){if(!t)return this;if(t.ranges&&e.isArray(t.ranges)){e.forEach(t.ranges,function(K){K=e.extend({},t,K);delete K.ranges;this[a](K)},this);return this}var y=t._natives={},I="",G;e.extend(y,D);t._natives.type=
a;t._running=false;y.start=y.start||y["in"];y.end=y.end||y.out;if(t.once)y.end=B(y.end,function(){this.removeTrackEvent(t._id)});y._teardown=B(function(){var K=h.call(arguments),E=this.data.running[y.type];K.unshift(null);K[1]._running&&E.splice(E.indexOf(t),1)&&y.end.apply(this,K)},y._teardown);t.compose=t.compose&&t.compose.split(" ")||[];t.effect=t.effect&&t.effect.split(" ")||[];t.compose=t.compose.concat(t.effect);t.compose.forEach(function(K){I=e.compositions[K]||{};w.forEach(function(E){y[E]=
B(y[E],I[E])})});t._natives.manifest=j;if(!("start"in t))t.start=t["in"]||0;if(!t.end&&t.end!==0)t.end=t.out||Number.MAX_VALUE;if(!i.call(t,"toString"))t.toString=function(){var K=["start: "+t.start,"end: "+t.end,"id: "+(t.id||t._id)];t.target!=null&&K.push("target: "+t.target);return a+" ( "+K.join(", ")+" )"};if(!t.target){G="options"in j&&j.options;t.target=G&&"target"in G&&G.target}if(t._natives)t._id=e.guid(t._natives.type);t._natives._setup&&t._natives._setup.call(this,t);e.addTrackEvent(this,
t);e.forEach(D,function(K,E){E!=="type"&&o.indexOf(E)===-1&&this.on(E,K)},this);return this};e.p[a]=s[a]=function(D,t){var y;if(D&&!t)t=D;else if(y=this.getTrackEvent(D)){t=e.extend({},y,t);e.addTrackEvent(this,t);return this}else t.id=D;this.data.running[a]=this.data.running[a]||[];y=e.extend({},this.options.defaults&&this.options.defaults[a]||{},t);return F.call(this,x?d.call(this,y):d,y)};j&&e.extend(d,{manifest:j});var C={fn:s[a],definition:d,base:d,parents:[],name:a};e.registry.push(e.extend(s,
C,{type:a}));e.registryByName[a]=C;return s}};e.plugin.errors=[];e.plugin.debug=e.version==="5f34b14";e.removePlugin=function(a,d){if(!d){d=a;a=e.p;if(e.protect.natives.indexOf(d.toLowerCase())>=0){e.error("'"+d+"' is a protected function name");return}var j=e.registry.length,o;for(o=0;o<j;o++)if(e.registry[o].name===d){e.registry.splice(o,1);delete e.registryByName[d];delete e.manifest[d];delete a[d];return}}j=a.data.trackEvents.byStart;o=a.data.trackEvents.byEnd;var s=a.data.trackEvents.animating,
x,w;x=0;for(w=j.length;x<w;x++){if(j[x]&&j[x]._natives&&j[x]._natives.type===d){j[x]._natives._teardown&&j[x]._natives._teardown.call(a,j[x]);j.splice(x,1);x--;w--;if(a.data.trackEvents.startIndex<=x){a.data.trackEvents.startIndex--;a.data.trackEvents.endIndex--}}o[x]&&o[x]._natives&&o[x]._natives.type===d&&o.splice(x,1)}x=0;for(w=s.length;x<w;x++)if(s[x]&&s[x]._natives&&s[x]._natives.type===d){s.splice(x,1);x--;w--}};e.compositions={};e.compose=function(a,d,j){e.manifest[a]=j||d.manifest||{};e.compositions[a]=
d};e.plugin.effect=e.effect=e.compose;var z=/^(?:\.|#|\[)/;e.dom={debug:false,find:function(a,d){var j=null;d=d||g;if(a){if(!z.test(a)){j=g.getElementById(a);if(j!==null)return j}try{j=d.querySelector(a)}catch(o){if(e.dom.debug)throw Error(o);}}return j}};var v=/\?/,A={url:"",data:"",dataType:"",success:e.nop,type:"GET",async:true,xhr:function(){return new p.XMLHttpRequest}};e.xhr=function(a){a.dataType=a.dataType&&a.dataType.toLowerCase()||null;if(a.dataType&&(a.dataType==="jsonp"||a.dataType===
"script"))e.xhr.getJSONP(a.url,a.success,a.dataType==="script");else{a=e.extend({},A,a);a.ajax=a.xhr();if(a.ajax){if(a.type==="GET"&&a.data){a.url+=(v.test(a.url)?"&":"?")+a.data;a.data=null}a.ajax.open(a.type,a.url,a.async);a.ajax.send(a.data||null);return e.xhr.httpData(a)}}};e.xhr.httpData=function(a){var d,j=null,o,s=null;a.ajax.onreadystatechange=function(){if(a.ajax.readyState===4){try{j=JSON.parse(a.ajax.responseText)}catch(x){}d={xml:a.ajax.responseXML,text:a.ajax.responseText,json:j};if(!d.xml||
!d.xml.documentElement){d.xml=null;try{o=new DOMParser;s=o.parseFromString(a.ajax.responseText,"text/xml");if(!s.getElementsByTagName("parsererror").length)d.xml=s}catch(w){}}if(a.dataType)d=d[a.dataType];a.success.call(a.ajax,d)}};return d};e.xhr.getJSONP=function(a,d,j){var o=g.head||g.getElementsByTagName("head")[0]||g.documentElement,s=g.createElement("script"),x=false,w=[];w=/(=)\?(?=&|$)|\?\?/;var B,F;if(!j){F=a.match(/(callback=[^&]*)/);if(F!==null&&F.length){w=F[1].split("=")[1];if(w==="?")w=
"jsonp";B=e.guid(w);a=a.replace(/(callback=[^&]*)/,"callback="+B)}else{B=e.guid("jsonp");if(w.test(a))a=a.replace(w,"$1"+B);w=a.split(/\?(.+)?/);a=w[0]+"?";if(w[1])a+=w[1]+"&";a+="callback="+B}window[B]=function(C){d&&d(C);x=true}}s.addEventListener("load",function(){j&&d&&d();x&&delete window[B];o.removeChild(s)},false);s.src=a;o.insertBefore(s,o.firstChild)};e.getJSONP=e.xhr.getJSONP;e.getScript=e.xhr.getScript=function(a,d){return e.xhr.getJSONP(a,d,true)};e.util={toSeconds:function(a,d){var j=
/^([0-9]+:){0,2}[0-9]+([.;][0-9]+)?$/,o,s,x;if(typeof a==="number")return a;typeof a==="string"&&!j.test(a)&&e.error("Invalid time format");j=a.split(":");o=j.length-1;s=j[o];if(s.indexOf(";")>-1){s=s.split(";");x=0;if(d&&typeof d==="number")x=parseFloat(s[1],10)/d;j[o]=parseInt(s[0],10)+x}o=j[0];return{1:parseFloat(o,10),2:parseInt(o,10)*60+parseFloat(j[1],10),3:parseInt(o,10)*3600+parseInt(j[1],10)*60+parseFloat(j[2],10)}[j.length||1]}};e.p.cue=e.p.exec;e.protect={natives:function(a){return Object.keys?
Object.keys(a):function(d){var j,o=[];for(j in d)i.call(d,j)&&o.push(j);return o}(a)}(e.p).map(function(a){return a.toLowerCase()})};e.forEach({listen:"on",unlisten:"off",trigger:"emit",exec:"cue"},function(a,d){var j=e.p[d];e.p[d]=function(){if(typeof console!=="undefined"&&console.warn){console.warn("Deprecated method '"+d+"', "+(a==null?"do not use.":"use '"+a+"' instead."));e.p[d]=j}return e.p[a].apply(this,[].slice.call(arguments))}});p.Popcorn=e}else{p.Popcorn={isSupported:false};for(b="byId forEach extend effects error guid sizeOf isArray nop position disable enable destroyaddTrackEvent removeTrackEvent getTrackEvents getTrackEvent getLastTrackEventId timeUpdate plugin removePlugin compose effect xhr getJSONP getScript".split(/\s+/);b.length;)p.Popcorn[b.shift()]=
function(){}}})(window,window.document);(function(p,g){function m(f){f=typeof f==="string"?f:[f.language,f.region].join("-");var h=f.split("-");return{iso6391:f,language:h[0]||"",region:h[1]||""}}var b=p.navigator,c=m(b.userLanguage||b.language);g.locale={get:function(){return c},set:function(f){c=m(f);g.locale.broadcast();return c},broadcast:function(f){var h=g.instances,i=h.length,k=0,r;for(f=f||"locale:changed";k<i;k++){r=h[k];f in r.data.events&&r.trigger(f)}}}})(this,this.Popcorn);(function(p){var g=Object.prototype.hasOwnProperty;p.parsers={};p.parser=function(m,b,c){if(p.protect.natives.indexOf(m.toLowerCase())>=0)p.error("'"+m+"' is a protected function name");else{if(typeof b==="function"&&!c){c=b;b=""}if(!(typeof c!=="function"||typeof b!=="string")){var f={};f[m]=function(h,i){if(!h)return this;var k=this;p.xhr({url:h,dataType:b,success:function(r){var n,l,q=0;r=c(r).data||[];if(n=r.length){for(;q<n;q++){l=r[q];for(var u in l)g.call(l,u)&&k[u]&&k[u](l[u])}i&&i()}}});
return this};p.extend(p.p,f);return f}}}})(Popcorn);(function(p){var g=function(m,b){m=m||p.nop;b=b||p.nop;return function(){m.apply(this,arguments);b.apply(this,arguments)}};p.player=function(m,b){if(!p[m]){b=b||{};var c=function(f,h,i){i=i||{};var k=new Date/1E3,r=k,n=0,l=0,q=1,u=false,e={},z=typeof f==="string"?p.dom.find(f):f,v={};Object.prototype.__defineGetter__||(v=z||document.createElement("div"));for(var A in z)if(!(A in v))if(typeof z[A]==="object")v[A]=z[A];else if(typeof z[A]==="function")v[A]=function(d){return"length"in z[d]&&!z[d].call?
z[d]:function(){return z[d].apply(z,arguments)}}(A);else p.player.defineProperty(v,A,{get:function(d){return function(){return z[d]}}(A),set:p.nop,configurable:true});var a=function(){k=new Date/1E3;if(!v.paused){v.currentTime+=k-r;v.dispatchEvent("timeupdate");setTimeout(a,10)}r=k};v.play=function(){this.paused=false;if(v.readyState>=4){r=new Date/1E3;v.dispatchEvent("play");a()}};v.pause=function(){this.paused=true;v.dispatchEvent("pause")};p.player.defineProperty(v,"currentTime",{get:function(){return n},
set:function(d){n=+d;v.dispatchEvent("timeupdate");return n},configurable:true});p.player.defineProperty(v,"volume",{get:function(){return q},set:function(d){q=+d;v.dispatchEvent("volumechange");return q},configurable:true});p.player.defineProperty(v,"muted",{get:function(){return u},set:function(d){u=+d;v.dispatchEvent("volumechange");return u},configurable:true});p.player.defineProperty(v,"readyState",{get:function(){return l},set:function(d){return l=d},configurable:true});v.addEventListener=function(d,
j){e[d]||(e[d]=[]);e[d].push(j);return j};v.removeEventListener=function(d,j){var o,s=e[d];if(s){for(o=e[d].length-1;o>=0;o--)j===s[o]&&s.splice(o,1);return j}};v.dispatchEvent=function(d){var j,o=d.type;if(!o){o=d;if(d=p.events.getInterface(o)){j=document.createEvent(d);j.initEvent(o,true,true,window,1)}}if(e[o])for(d=e[o].length-1;d>=0;d--)e[o][d].call(this,j,this)};v.src=h||"";v.duration=0;v.paused=true;v.ended=0;i&&i.events&&p.forEach(i.events,function(d,j){v.addEventListener(j,d,false)});if(b._canPlayType(z.nodeName,
h)!==false)if(b._setup)b._setup.call(v,i);else{v.readyState=4;v.dispatchEvent("loadedmetadata");v.dispatchEvent("loadeddata");v.dispatchEvent("canplaythrough")}else setTimeout(function(){v.dispatchEvent("error")},0);f=new p.p.init(v,i);if(b._teardown)f.destroy=g(f.destroy,function(){b._teardown.call(v,i)});return f};c.canPlayType=b._canPlayType=b._canPlayType||p.nop;p[m]=p.player.registry[m]=c}};p.player.registry={};p.player.defineProperty=Object.defineProperty||function(m,b,c){m.__defineGetter__(b,
c.get||p.nop);m.__defineSetter__(b,c.set||p.nop)};p.player.playerQueue=function(){var m=[],b=false;return{next:function(){b=false;m.shift();m[0]&&m[0]()},add:function(c){m.push(function(){b=true;c&&c()});!b&&m[0]()}}};p.smart=function(m,b,c){var f=typeof m==="string"?p.dom.find(m):m,h,i,k,r,n="HTMLVimeoVideoElement HTMLSoundCloudAudioElement HTMLNullVideoElement".split(" ");if(f){b=typeof b==="string"?[b]:b;m=0;for(srcLength=b.length;m<srcLength;m++){h=b[m];for(i=0;i<n.length;i++){r=p[n[i]];if(r._canPlaySrc(h)===
"probably"){k=r(f);b=p(k,c);setTimeout(function(){k.src=h},0);return b}}for(var l in p.player.registry)if(p.player.registry.hasOwnProperty(l))if(p.player.registry[l].canPlayType(f.nodeName,h))return p[l](f,h,c)}l=p.guid("popcorn-video-");n='<video id="'+l+'" preload=auto autobuffer>';m=0;for(srcLength=b.length;m<srcLength;m++)n+='<source src="'+b[m]+'">';n+="</video>";f.innerHTML=n;c&&c.events&&c.events.error&&f.addEventListener("error",c.events.error,false);return p("#"+l,c)}else p.error("Specified target `"+
m+"` was not found.")}})(Popcorn);(function(p,g){var m=p.document,b=p.location,c=/:\/\//,f=b.href.replace(b.href.split("/").slice(-1)[0],""),h=function(k,r,n){k=k||0;r=(r||k||0)+1;n=n||1;r=Math.ceil((r-k)/n)||0;var l=0,q=[];for(q.length=r;l<r;){q[l++]=k;k+=n}return q};g.sequence=function(k,r){return new g.sequence.init(k,r)};g.sequence.init=function(k,r){this.parent=m.getElementById(k);this.seqId=g.guid("__sequenced");this.queue=[];this.playlist=[];this.inOuts={ofVideos:[],ofClips:[]};this.dims={width:0,height:0};this.active=0;this.playing=
this.cycling=false;this.times={last:0};this.events={};var n=this,l=0;g.forEach(r,function(q,u){var e=m.createElement("video");e.preload="auto";e.controls=true;e.style.display=u&&"none"||"";e.id=n.seqId+"-"+u;n.queue.push(e);var z=q["in"],v=q.out;n.inOuts.ofVideos.push({"in":z!==undefined&&z||1,out:v!==undefined&&v||0});n.inOuts.ofVideos[u].out=n.inOuts.ofVideos[u].out||n.inOuts.ofVideos[u]["in"]+2;e.src=!c.test(q.src)?f+q.src:q.src;e.setAttribute("data-sequence-owner",k);e.setAttribute("data-sequence-guid",
n.seqId);e.setAttribute("data-sequence-id",u);e.setAttribute("data-sequence-clip",[n.inOuts.ofVideos[u]["in"],n.inOuts.ofVideos[u].out].join(":"));n.parent.appendChild(e);n.playlist.push(g("#"+e.id))});n.inOuts.ofVideos.forEach(function(q){q={"in":l,out:l+(q.out-q["in"])};n.inOuts.ofClips.push(q);l=q.out+1});g.forEach(this.queue,function(q,u){function e(){if(!u){n.dims.width=q.videoWidth;n.dims.height=q.videoHeight}q.currentTime=n.inOuts.ofVideos[u]["in"]-0.5;q.removeEventListener("canplaythrough",
e,false);return true}q.addEventListener("canplaythrough",e,false);q.addEventListener("play",function(){n.playing=true},false);q.addEventListener("pause",function(){n.playing=false},false);q.addEventListener("timeupdate",function(z){z=z.srcElement||z.target;z=+(z.dataset&&z.dataset.sequenceId||z.getAttribute("data-sequence-id"));var v=Math.floor(q.currentTime);if(n.times.last!==v&&z===n.active){n.times.last=v;v===n.inOuts.ofVideos[z].out&&g.sequence.cycle.call(n,z)}},false)});return this};g.sequence.init.prototype=
g.sequence.prototype;g.sequence.cycle=function(k){this.queue||g.error("Popcorn.sequence.cycle is not a public method");var r=this.queue,n=this.inOuts.ofVideos,l=r[k],q=0,u;if(r[k+1])q=k+1;if(r[k+1]){r=r[q];n=n[q];g.extend(r,{width:this.dims.width,height:this.dims.height});u=this.playlist[q];l.pause();this.active=q;this.times.last=n["in"]-1;u.currentTime(n["in"]);u[q?"play":"pause"]();this.trigger("cycle",{position:{previous:k,current:q}});if(q){l.style.display="none";r.style.display=""}this.cycling=
false}else this.playlist[k].pause();return this};var i=["timeupdate","play","pause"];g.extend(g.sequence.prototype,{eq:function(k){return this.playlist[k]},remove:function(){this.parent.innerHTML=null},clip:function(k){return this.inOuts.ofVideos[k]},duration:function(){for(var k=0,r=this.inOuts.ofClips,n=0;n<r.length;n++)k+=r[n].out-r[n]["in"]+1;return k-1},play:function(){this.playlist[this.active].play();return this},exec:function(k,r){var n=this.active;this.inOuts.ofClips.forEach(function(l,q){if(k>=
l["in"]&&k<=l.out)n=q});k+=this.inOuts.ofVideos[n]["in"]-this.inOuts.ofClips[n]["in"];g.addTrackEvent(this.playlist[n],{start:k-1,end:k,_running:false,_natives:{start:r||g.nop,end:g.nop,type:"exec"}});return this},listen:function(k,r){var n=this,l=this.playlist,q=l.length,u=0;if(!r)r=g.nop;if(g.Events.Natives.indexOf(k)>-1)g.forEach(l,function(e){e.listen(k,function(z){z.active=n;if(i.indexOf(k)>-1)r.call(e,z);else++u===q&&r.call(e,z)})});else{this.events[k]||(this.events[k]={});l=r.name||g.guid("__"+
k);this.events[k][l]=r}return this},unlisten:function(){},trigger:function(k,r){var n=this;if(!(g.Events.Natives.indexOf(k)>-1)){this.events[k]&&g.forEach(this.events[k],function(l){l.call(n,{type:k},r)});return this}}});g.forEach(g.manifest,function(k,r){g.sequence.prototype[r]=function(n){var l={},q=[],u,e,z,v,A;for(u=0;u<this.inOuts.ofClips.length;u++){q=this.inOuts.ofClips[u];e=h(q["in"],q.out);z=e.indexOf(n.start);v=e.indexOf(n.end);if(z>-1)l[u]=g.extend({},q,{start:e[z],clipIdx:z});if(v>-1)l[u]=
g.extend({},q,{end:e[v],clipIdx:v})}u=Object.keys(l).map(function(d){return+d});q=h(u[0],u[1]);for(u=0;u<q.length;u++){z={};v=q[u];var a=l[v];if(a){A=this.inOuts.ofVideos[v];e=a.clipIdx;A=h(A["in"],A.out);if(a.start){z.start=A[e];z.end=A[A.length-1]}if(a.end){z.start=A[0];z.end=A[e]}}else{z.start=this.inOuts.ofVideos[v]["in"];z.end=this.inOuts.ofVideos[v].out}this.playlist[v][r](g.extend({},n,z))}return this}})})(this,Popcorn);(function(p){document.addEventListener("DOMContentLoaded",function(){var g=document.querySelectorAll("[data-timeline-sources]");p.forEach(g,function(m,b){var c=g[b],f,h,i;if(!c.id)c.id=p.guid("__popcorn");if(c.nodeType&&c.nodeType===1){i=p("#"+c.id);f=(c.getAttribute("data-timeline-sources")||"").split(",");f[0]&&p.forEach(f,function(k){h=k.split("!");if(h.length===1){h=k.match(/(.*)[\/\\]([^\/\\]+\.\w+)$/)[2].split(".");h[0]="parse"+h[1].toUpperCase();h[1]=k}f[0]&&i[h[0]]&&i[h[0]](h[1])});i.autoplay()&&
i.play()}})},false)})(Popcorn);(function(p,g){function m(f){var h=m.options;f=h.parser[h.strictMode?"strict":"loose"].exec(f);for(var i={},k=14;k--;)i[h.key[k]]=f[k]||"";i[h.q.name]={};i[h.key[12]].replace(h.q.parser,function(r,n,l){if(n)i[h.q.name][n]=l});return i}function b(){}m.options={strictMode:false,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,
loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}};var c={length:0,start:p.nop,end:p.nop};MediaError=MediaError||function(){function f(h,i){this.code=h||null;this.message=i||""}f.MEDIA_ERR_NONE_ACTIVE=0;f.MEDIA_ERR_ABORTED=1;f.MEDIA_ERR_NETWORK=2;f.MEDIA_ERR_DECODE=3;f.MEDIA_ERR_NONE_SUPPORTED=4;return f}();b.prototype={_util:{TIMEUPDATE_MS:250,MIN_WIDTH:300,
MIN_HEIGHT:150,isAttributeSet:function(f){return typeof f==="string"||f===true},parseUri:m},addEventListener:function(f,h,i){g.addEventListener(this._eventNamespace+f,h,i)},removeEventListener:function(f,h,i){g.removeEventListener(this._eventNamespace+f,h,i)},dispatchEvent:function(f){var h=g.createEvent("CustomEvent");h.initCustomEvent(this._eventNamespace+f,false,false,{type:f,target:this.parentNode,data:null});g.dispatchEvent(h)},load:p.nop,canPlayType:function(){return""},getBoundingClientRect:function(){return this.parentNode.getBoundingClientRect()},
NETWORK_EMPTY:0,NETWORK_IDLE:1,NETWORK_LOADING:2,NETWORK_NO_SOURCE:3,HAVE_NOTHING:0,HAVE_METADATA:1,HAVE_CURRENT_DATA:2,HAVE_FUTURE_DATA:3,HAVE_ENOUGH_DATA:4};b.prototype.constructor=b;Object.defineProperties(b.prototype,{currentSrc:{get:function(){return this.src!==undefined?this.src:""}},preload:{get:function(){return"auto"},set:p.nop},controls:{get:function(){return true},set:p.nop},poster:{get:function(){return""},set:p.nop},crossorigin:{get:function(){return""}},played:{get:function(){return c}},
seekable:{get:function(){return c}},buffered:{get:function(){return c}},defaultMuted:{get:function(){return false}},defaultPlaybackRate:{get:function(){return 1}}});p._MediaElementProto=b})(Popcorn,window.document);(function(p,g){function m(){return"maybe"}function b(c,f){var h=typeof c==="string"?g.querySelector(c):c,i=g.createElement(f);h.appendChild(i);i._canPlaySrc=m;return i}p.HTMLVideoElement=function(c){return b(c,"video")};p.HTMLVideoElement._canPlaySrc=m;p.HTMLAudioElement=function(c){return b(c,"audio")};p.HTMLAudioElement._canPlaySrc=m})(Popcorn,window.document);(function(p,g){function m(h){this.currentTime=h.currentTime||0;this.duration=h.duration||NaN;this.playInterval=null;this.ended=h.endedCallback||p.nop}function b(h){function i(d){A.unshift(d)}function k(d){if(e){v.seeking=true;l.dispatchEvent("seeking");z.seekTo(d);v.seeking=false;l.dispatchEvent("timeupdate");l.dispatchEvent("seeked");l.dispatchEvent("canplay");l.dispatchEvent("canplaythrough")}else i(function(){k(d)})}function r(){l.dispatchEvent("timeupdate")}function n(){if(v.loop){k(0);l.play()}else{v.ended=
true;clearInterval(a);l.dispatchEvent("timeupdate");l.dispatchEvent("ended")}}var l=this,q=typeof h==="string"?g.querySelector(h):h,u,e=false,z,v={src:c,networkState:l.NETWORK_EMPTY,readyState:l.HAVE_NOTHING,autoplay:c,preload:c,controls:c,loop:false,poster:c,volume:1,muted:false,width:q.width|0?q.width:l._util.MIN_WIDTH,height:q.height|0?q.height:l._util.MIN_HEIGHT,seeking:false,ended:false,paused:1,error:null},A=[],a;l._eventNamespace=p.guid("HTMLNullVideoElement::");l.parentNode=q;l.play=function(){if(e){z.play();
if(v.paused===1){v.paused=false;l.dispatchEvent("play");l.dispatchEvent("playing")}else{v.ended&&k(0);if(v.paused){v.paused=false;v.loop||l.dispatchEvent("play");l.dispatchEvent("playing")}}a=setInterval(r,l._util.TIMEUPDATE_MS)}else i(function(){l.play()})};l.pause=function(){if(e){z.pause();v.paused=true;clearInterval(a);l.dispatchEvent("pause")}else i(function(){l.pause()})};Object.defineProperties(l,{src:{get:function(){return v.src},set:function(d){if(d&&d!==v.src)if(l._canPlaySrc(d)){v.src=
d;if(e)if(e&&z){z.pause();z=null;q.removeChild(u);u=null}u=g.createElement("div");u.width=v.width;u.height=v.height;q.appendChild(u);d=f.exec(d);z=new m({currentTime:d[1],duration:d[2],endedCallback:n});l.dispatchEvent("loadstart");l.dispatchEvent("progress");l.dispatchEvent("durationchange");e=true;v.networkState=l.NETWORK_IDLE;v.readyState=l.HAVE_METADATA;l.dispatchEvent("loadedmetadata");l.dispatchEvent("loadeddata");v.readyState=l.HAVE_FUTURE_DATA;l.dispatchEvent("canplay");v.readyState=l.HAVE_ENOUGH_DATA;
l.dispatchEvent("canplaythrough");for(d=A.length;d--;){A[d]();delete A[d]}v.autoplay&&l.play()}else{v.error={name:"MediaError",message:"Media Source Not Supported",code:MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED};l.dispatchEvent("error")}}},autoplay:{get:function(){return v.autoplay},set:function(d){v.autoplay=l._util.isAttributeSet(d)}},loop:{get:function(){return v.loop},set:function(d){v.loop=l._util.isAttributeSet(d)}},width:{get:function(){return u.width},set:function(d){v.width=d}},height:{get:function(){return u.height},
set:function(d){v.height=d}},currentTime:{get:function(){var d;d=e?z.currentTime:0;return d},set:function(d){k(d)}},duration:{get:function(){return z?z.duration:NaN}},ended:{get:function(){return v.ended}},paused:{get:function(){return v.paused}},seeking:{get:function(){return v.seeking}},readyState:{get:function(){return v.readyState}},networkState:{get:function(){return v.networkState}},volume:{get:function(){return v.volume},set:function(d){if(d<0||d>1)throw"Volume value must be between 0.0 and 1.0";
v.volume=d;l.dispatchEvent("volumechange")}},muted:{get:function(){return v.muted},set:function(d){d=l._util.isAttributeSet(d);v.muted=d;l.dispatchEvent("volumechange")}},error:{get:function(){return v.error}}})}var c="",f=/#t=(\d+)?,?(\d+)?/;m.prototype={play:function(){var h=this;this.playInterval=setInterval(function(){if(h.currentTime+0.016>=h.duration){h.currentTime=h.duration;h.pause();h.ended()}else h.currentTime+=0.016},16)},pause:function(){clearInterval(this.playInterval)},seekTo:function(h){h=
h<0?0:h;this.currentTime=h=h>this.duration?this.duration:h}};b.prototype=new p._MediaElementProto;b.prototype.constructor=b;b.prototype._canPlaySrc=function(h){return/#t=\d*,?\d+?/.test(h)?"probably":c};b.prototype.canPlayType=function(h){return h==="video/x-nullvideo"?"probably":c};p.HTMLNullVideoElement=function(h){return new b(h)};p.HTMLNullVideoElement._canPlaySrc=b.prototype._canPlaySrc})(Popcorn,document);(function(p,g,m){function b(){if(!r){p.getScript("http://w.soundcloud.com/player/api.js",function(){p.getScript("http://connect.soundcloud.com/sdk.js",function(){k=true;SC.initialize({client_id:"PRaNFlda6Bhf5utPjUsptg"});for(var l=n.length;l--;){n[l]();delete n[l]}})});r=true}return k}function c(l){n.unshift(l)}function f(l){function q(E){y.unshift(E)}function u(){t.bind(SC.Widget.Events.LOAD_PROGRESS,function(E){d({type:"loadProgress",data:E.currentPosition/1E3})});t.bind(SC.Widget.Events.PLAY_PROGRESS,
function(E){d({type:"playProgress",data:E.currentPosition/1E3})});t.bind(SC.Widget.Events.PLAY,function(){d({type:"play"})});t.bind(SC.Widget.Events.PAUSE,function(){d({type:"pause"})});t.bind(SC.Widget.Events.SEEK,function(E){d({type:"seek",data:E.currentPosition})});t.bind(SC.Widget.Events.FINISH,function(){d({type:"finish"})});D=true;t.getDuration(z)}function e(){t.bind(SC.Widget.Events.LOAD_PROGRESS,function(E){if(E.loadedProgress>0){t.unbind(SC.Widget.Events.LOAD_PROGRESS);t.pause()}});t.bind(SC.Widget.Events.PLAY,
function(){t.unbind(SC.Widget.Events.PLAY);t.bind(SC.Widget.Events.PAUSE,function(){t.unbind(SC.Widget.Events.PAUSE);u()})});t.play()}function z(E){E/=1E3;var L=C.duration;if(L!==E){C.duration=E;w.dispatchEvent("durationchange");if(isNaN(L)){C.networkState=w.NETWORK_IDLE;C.readyState=w.HAVE_METADATA;w.dispatchEvent("loadedmetadata");w.dispatchEvent("loadeddata");C.readyState=w.HAVE_FUTURE_DATA;w.dispatchEvent("canplay");C.readyState=w.HAVE_ENOUGH_DATA;w.dispatchEvent("canplaythrough");for(E=y.length;E--;){y[E]();
delete y[E]}C.paused&&C.autoplay&&w.play()}}}function v(E){if(D){E*=1E3;C.seeking=true;w.dispatchEvent("seeking");t.seekTo(E)}else q(function(){v(E)})}function A(){w.dispatchEvent("timeupdate")}function a(E){(C.currentTime=E/1E3)!==K&&w.dispatchEvent("timeupdate");K=C.currentTime}function d(E){switch(E.type){case "loadProgress":w.dispatchEvent("progress");break;case "playProgress":a(E.data);break;case "play":C.ended&&v(0);if(!G){G=setInterval(j,h);C.loop&&w.dispatchEvent("play")}I=setInterval(A,w._util.TIMEUPDATE_MS);
if(C.paused){C.paused=false;C.loop||w.dispatchEvent("play");w.dispatchEvent("playing")}break;case "pause":C.paused=true;clearInterval(I);w.dispatchEvent("pause");break;case "finish":if(C.loop){v(0);w.play()}else{C.ended=true;w.dispatchEvent("ended")}break;case "seek":a(E.data);C.seeking=false;w.dispatchEvent("timeupdate");w.dispatchEvent("seeked");w.dispatchEvent("canplay");w.dispatchEvent("canplaythrough")}}function j(){t.getPosition(a)}function o(E){if(w._canPlaySrc(E)){C.src=E;if(D)if(D&&t){clearInterval(G);
t.pause();t.unbind(SC.Widget.Events.READY);t.unbind(SC.Widget.Events.LOAD_PROGRESS);t.unbind(SC.Widget.Events.PLAY_PROGRESS);t.unbind(SC.Widget.Events.PLAY);t.unbind(SC.Widget.Events.PAUSE);t.unbind(SC.Widget.Events.SEEK);t.unbind(SC.Widget.Events.FINISH);B.removeChild(F);F=null}if(b()){D=false;SC.get("/resolve",{url:E},function(L){F=m.createElement("iframe");F.id=p.guid("soundcloud-");F.width=C.width;F.height=C.height;F.frameBorder=0;F.webkitAllowFullScreen=true;F.mozAllowFullScreen=true;F.allowFullScreen=
true;B.appendChild(F);F.onload=function(){F.onload=null;t=SC.Widget(F);t.bind(SC.Widget.Events.READY,e);C.networkState=w.NETWORK_LOADING;w.dispatchEvent("loadstart");w.dispatchEvent("progress")};F.src="http://w.soundcloud.com/player/?url="+L.uri+"&show_artwork=false&buying=false&liking=false&sharing=false&download=falseshow_comments=falseshow_user=false"})}else c(function(){o(E)})}else{C.error={name:"MediaError",message:"Media Source Not Supported",code:MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED};w.dispatchEvent("error")}}
function s(E){C.volume=E;if(D){t.setVolume(E);w.dispatchEvent("volumechange")}else q(function(){s(E)})}function x(E){if(D)if(E){C.muted=C.volume;s(0)}else{C.muted=0;s(C.muted)}else{C.muted=E?1:0;q(function(){x(E)})}}if(!g.postMessage)throw"ERROR: HTMLSoundCloudAudioElement requires window.postMessage";var w=this,B=typeof l==="string"?p.dom.find(l):l,F,C={src:i,networkState:w.NETWORK_EMPTY,readyState:w.HAVE_NOTHING,seeking:false,autoplay:i,preload:i,controls:false,loop:false,poster:i,volume:1,muted:0,
currentTime:0,duration:NaN,ended:false,paused:true,width:B.width|0?B.width:w._util.MIN_WIDTH,height:B.height|0?B.height:w._util.MIN_HEIGHT,error:null},D=false,t,y=[],I,G,K=0;w._eventNamespace=p.guid("HTMLSoundCloudAudioElement::");w.parentNode=B;w.play=function(){D?t.play():q(function(){w.play()})};w.pause=function(){D?t.pause():q(function(){w.pause()})};Object.defineProperties(w,{src:{get:function(){return C.src},set:function(E){E&&E!==C.src&&o(E)}},autoplay:{get:function(){return C.autoplay},set:function(E){C.autoplay=
w._util.isAttributeSet(E)}},loop:{get:function(){return C.loop},set:function(E){C.loop=w._util.isAttributeSet(E)}},width:{get:function(){return F.width},set:function(E){C.width=E}},height:{get:function(){return F.height},set:function(E){C.height=E}},currentTime:{get:function(){return C.currentTime},set:function(E){v(E)}},duration:{get:function(){return C.duration}},ended:{get:function(){return C.ended}},paused:{get:function(){return C.paused}},seeking:{get:function(){return C.seeking}},readyState:{get:function(){return C.readyState}},
networkState:{get:function(){return C.networkState}},volume:{get:function(){return(C.muted>0?C.muted:C.volume)/100},set:function(E){if(E<0||E>1)throw"Volume value must be between 0.0 and 1.0";E*=100;s(E)}},muted:{get:function(){return C.muted>0},set:function(E){x(w._util.isAttributeSet(E))}},error:{get:function(){return C.error}}})}var h=16,i="",k=false,r=false,n=[];f.prototype=new p._MediaElementProto;f.prototype._canPlaySrc=function(l){return/(?:http:\/\/www\.|http:\/\/|www\.|\.|^)(soundcloud)/.test(l)?
"probably":i};f.prototype.canPlayType=function(l){return l==="audio/x-soundcloud"?"probably":i};p.HTMLSoundCloudAudioElement=function(l){return new f(l)};p.HTMLSoundCloudAudioElement._canPlaySrc=f.prototype._canPlaySrc})(Popcorn,window,document);(function(p,g,m){function b(r){var n=this,l=r.src.split("?")[0];if(l.substr(0,2)==="//")l=g.location.protocol+l;"play pause paused seekTo unload getCurrentTime getDuration getVideoEmbedCode getVideoHeight getVideoWidth getVideoUrl getColor setColor setLoop getVolume setVolume addEventListener".split(" ").forEach(function(q){n[q]=function(u){u=JSON.stringify({method:q,value:u});r.contentWindow&&r.contentWindow.postMessage(u,l)}})}function c(r){function n(y){F.unshift(y)}function l(y){var I=s.duration;
if(I!==y){s.duration=y;d.dispatchEvent("durationchange");if(isNaN(I)){s.networkState=d.NETWORK_IDLE;s.readyState=d.HAVE_METADATA;d.dispatchEvent("loadedmetadata");d.dispatchEvent("loadeddata");s.readyState=d.HAVE_FUTURE_DATA;d.dispatchEvent("canplay");s.readyState=d.HAVE_ENOUGH_DATA;d.dispatchEvent("canplaythrough")}}}function q(y){if(x){s.seeking=true;d.dispatchEvent("seeking");B.seekTo(y)}else n(function(){q(y)})}function u(){d.dispatchEvent("timeupdate")}function e(y){(s.currentTime=y)!==t&&d.dispatchEvent("timeupdate");
t=s.currentTime}function z(y){if(y.origin==="http://player.vimeo.com"){var I;try{I=JSON.parse(y.data)}catch(G){console.warn(G)}if(I.player_id==w){switch(I.method){case "getCurrentTime":e(parseFloat(I.value));break;case "getDuration":l(parseFloat(I.value));break;case "getVolume":y=parseFloat(I.value);if(s.volume!==y){s.volume=y;d.dispatchEvent("volumechange")}}switch(I.event){case "ready":B=new b(o);x=true;B.addEventListener("loadProgress");B.addEventListener("playProgress");B.addEventListener("play");
B.addEventListener("pause");B.addEventListener("finish");B.addEventListener("seek");B.getDuration();s.autoplay&&d.play();for(I=F.length;I--;){F[I]();delete F[I]}s.networkState=d.NETWORK_LOADING;d.dispatchEvent("loadstart");d.dispatchEvent("progress");break;case "loadProgress":d.dispatchEvent("progress");l(parseFloat(I.data.duration));break;case "playProgress":e(parseFloat(I.data.seconds));break;case "play":s.ended&&q(0);if(!D){D=setInterval(v,f);s.loop&&d.dispatchEvent("play")}C=setInterval(u,d._util.TIMEUPDATE_MS);
if(s.paused){s.paused=false;s.loop||d.dispatchEvent("play");d.dispatchEvent("playing")}break;case "pause":s.paused=true;clearInterval(C);d.dispatchEvent("pause");break;case "finish":if(s.loop){q(0);d.play()}else{s.ended=true;d.dispatchEvent("ended")}break;case "seek":e(parseFloat(I.data.seconds));s.seeking=false;d.dispatchEvent("timeupdate");d.dispatchEvent("seeked");d.dispatchEvent("canplay");d.dispatchEvent("canplaythrough");s.paused&&d.pause()}}}}function v(){B.getCurrentTime()}function A(y){s.volume=
y;if(x){B.setVolume(y);d.dispatchEvent("volumechange")}else n(function(){A(y)})}function a(y){if(x)if(y){s.muted=s.volume;A(0)}else{s.muted=0;A(s.muted)}else{s.muted=y?1:0;n(function(){a(y)})}}if(!g.postMessage)throw"ERROR: HTMLVimeoVideoElement requires window.postMessage";var d=this,j=typeof r==="string"?m.querySelector(r):r,o,s={src:h,networkState:d.NETWORK_EMPTY,readyState:d.HAVE_NOTHING,seeking:false,autoplay:h,preload:h,controls:true,loop:false,poster:h,volume:0.77,muted:0,currentTime:0,duration:NaN,
ended:false,paused:true,width:j.width|0?j.width:i,height:j.height|0?j.height:k,error:null},x=false,w=p.guid(),B,F=[],C,D,t=0;d._eventNamespace=p.guid("HTMLVimeoVideoElement::");d.parentNode=j;d.play=function(){x?B.play():n(function(){d.play()})};d.pause=function(){x?B.pause():n(function(){d.pause()})};Object.defineProperties(d,{src:{get:function(){return s.src},set:function(y){if(y&&y!==s.src)if(d._canPlaySrc(y)){s.src=y;if(x)if(x&&B){clearInterval(D);B.pause();g.removeEventListener("message",z,false);
j.removeChild(o);o=null}x=false;y=d._util.parseUri(y);var I=y.queryKey,G,K=["api=1","player_id="+w];s.loop=I.loop==="1"||s.loop;delete I.loop;s.autoplay=I.autoplay==="1"||s.autoplay;delete I.autoplay;y="http://player.vimeo.com/video/"+/\d+$/.exec(y.path)+"?";for(G in I)I.hasOwnProperty(G)&&K.push(encodeURIComponent(G)+"="+encodeURIComponent(I[G]));y+=K.join("&");o=m.createElement("iframe");o.id=w;o.width=s.width;o.height=s.height;o.frameBorder=0;o.webkitAllowFullScreen=true;o.mozAllowFullScreen=true;
o.allowFullScreen=true;j.appendChild(o);o.src=y;g.addEventListener("message",z,false)}else{s.error={name:"MediaError",message:"Media Source Not Supported",code:MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED};d.dispatchEvent("error")}}},autoplay:{get:function(){return s.autoplay},set:function(y){s.autoplay=d._util.isAttributeSet(y)}},loop:{get:function(){return s.loop},set:function(y){s.loop=d._util.isAttributeSet(y)}},width:{get:function(){return o.width},set:function(y){s.width=y}},height:{get:function(){return o.height},
set:function(y){s.height=y}},currentTime:{get:function(){return s.currentTime},set:function(y){q(y)}},duration:{get:function(){return s.duration}},ended:{get:function(){return s.ended}},paused:{get:function(){return s.paused}},seeking:{get:function(){return s.seeking}},readyState:{get:function(){return s.readyState}},networkState:{get:function(){return s.networkState}},volume:{get:function(){return s.muted>0?s.muted:s.volume},set:function(y){if(y<0||y>1)throw"Volume value must be between 0.0 and 1.0";
A(y)}},muted:{get:function(){return s.muted>0},set:function(y){a(d._util.isAttributeSet(y))}},error:{get:function(){return s.error}}})}var f=16,h="",i=300,k=200;c.prototype=new p._MediaElementProto;c.prototype.constructor=c;c.prototype._canPlaySrc=function(r){return/player.vimeo.com\/video\/\d+/.test(r)||/vimeo.com\/\d+/.test(r)?"probably":h};c.prototype.canPlayType=function(r){return r==="video/x-vimeo"?"probably":h};p.HTMLVimeoVideoElement=function(r){return new c(r)};p.HTMLVimeoVideoElement._canPlaySrc=
c.prototype._canPlaySrc})(Popcorn,window,document);(function(p,g,m){function b(){if(!u){var z=m.createElement("script");z.src="//www.youtube.com/iframe_api";var v=m.getElementsByTagName("script")[0];v.parentNode.insertBefore(z,v);u=true}return q}function c(z){e.unshift(z)}function f(z){function v(H){L.unshift(H)}function A(){K=true}function a(){if(!K){v(function(){a()});return G.duration}var H=G.duration,J=E.getDuration();if(J){if(H!==J){G.duration=J;t.dispatchEvent("durationchange")}}else{if(!M){M=true;t.play();t.pause()}setTimeout(a,50)}return J}
function d(H){var J={name:"MediaError"};switch(H.data){case 2:J.message="Invalid video parameter.";J.code=MediaError.MEDIA_ERR_ABORTED;break;case 5:J.message="The requested content cannot be played in an HTML5 player or another error related to the HTML5 player has occurred.";J.code=MediaError.MEDIA_ERR_DECODE;case 100:J.message="Video not found.";J.code=MediaError.MEDIA_ERR_NETWORK;break;case 101:case 150:J.message="Video not usable.";J.code=MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED;break;default:J.message=
"Unknown error.";J.code=5}G.error=J;t.dispatchEvent("error")}function j(H){switch(H.data){case -1:G.readyState=t.HAVE_METADATA;t.dispatchEvent("loadedmetadata");t.dispatchEvent("loadeddata");G.readyState=t.HAVE_FUTURE_DATA;t.dispatchEvent("canplay");G.readyState=t.HAVE_ENOUGH_DATA;t.dispatchEvent("canplaythrough");G.autoplay&&t.play();for(H=L.length;H--;){L[H]();delete L[H]}break;case YT.PlayerState.ENDED:if(G.loop){x(0);t.play()}else{G.ended=true;t.dispatchEvent("ended")}break;case YT.PlayerState.PLAYING:M=
true;G.ended&&x(0);if(!O){O=setInterval(s,h);G.loop&&t.dispatchEvent("play")}P=setInterval(w,t._util.TIMEUPDATE_MS);if(G.paused){G.paused=false;G.loop||t.dispatchEvent("play");t.dispatchEvent("playing")}break;case YT.PlayerState.PAUSED:G.paused=true;clearInterval(P);t.dispatchEvent("pause");break;case YT.PlayerState.BUFFERING:G.networkState=t.NETWORK_LOADING;t.dispatchEvent("waiting")}}function o(H){if(t._canPlaySrc(H)){G.src=H;if(b()){if(K)if(K&&E){clearInterval(O);E.stopVideo();E.clearVideo();y.removeChild(I);
I=null}I=m.createElement("div");I.width=G.width;I.height=G.height;y.appendChild(I);var J=t._util.parseUri(H).queryKey;delete J.v;G.autoplay=J.autoplay==="1"||G.autoplay;delete J.autoplay;G.loop=J.loop==="1"||G.loop;delete J.loop;J.rel=J.rel||0;J.modestbranding=J.modestbranding||1;J.iv_load_policy=J.iv_load_policy||3;J.showinfo=J.showinfo||0;var R=g.location.protocol+"//"+g.location.host;J.origin=J.origin||R;J.controls=J.controls||G.controls?2:0;G.controls=J.controls;H=n.exec(H)[1];E=new YT.Player(I,
{width:G.width,height:G.height,videoId:H,playerVars:J,events:{onReady:A,onError:d,onStateChange:j}});G.networkState=t.NETWORK_LOADING;t.dispatchEvent("loadstart");t.dispatchEvent("progress");M=false;a()}else c(function(){o(H)})}else{G.error={name:"MediaError",message:"Media Source Not Supported",code:MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED};t.dispatchEvent("error")}}function s(){var H=G.currentTime=E.getCurrentTime();if(!G.seeking&&l(Q-H)>h){B();F()}if(N>-1&&l(H-N)<1){N=-1;F()}Q=G.currentTime}function x(H){if(K){B(H);
E.seekTo(H)}else v(function(){x(H)})}function w(){t.dispatchEvent("timeupdate")}function B(H){if(H!==undefined)N=H;G.seeking=true;t.dispatchEvent("seeking")}function F(){G.seeking=false;t.dispatchEvent("timeupdate");t.dispatchEvent("seeked");t.dispatchEvent("canplay");t.dispatchEvent("canplaythrough")}function C(H){if(K){E.setVolume(H);t.dispatchEvent("volumechange")}else{G.volume=H;v(function(){C(G.volume)})}}function D(H){if(K){E[H?"mute":"unMute"]();t.dispatchEvent("volumechange")}else{G.muted=
H;v(function(){D(G.muted)})}}if(!g.postMessage)throw"ERROR: HTMLYouTubeVideoElement requires window.postMessage";var t=this,y=typeof z==="string"?m.querySelector(z):z,I,G={src:i,networkState:t.NETWORK_EMPTY,readyState:t.HAVE_NOTHING,seeking:false,autoplay:i,preload:i,controls:true,loop:false,poster:i,volume:-1,muted:false,currentTime:0,duration:NaN,ended:false,paused:true,width:y.width|0?y.width:k,height:y.height|0?y.height:r,error:null},K=false,E,L=[],O,Q=0,N=-1,P,M=false;t._eventNamespace=p.guid("HTMLYouTubeVideoElement::");
t.parentNode=y;t.play=function(){K?E.playVideo():v(function(){t.play()})};t.pause=function(){K?E.pauseVideo():v(function(){t.pause()})};Object.defineProperties(t,{src:{get:function(){return G.src},set:function(H){H&&H!==G.src&&o(H)}},autoplay:{get:function(){return G.autoplay},set:function(H){G.autoplay=t._util.isAttributeSet(H)}},loop:{get:function(){return G.loop},set:function(H){G.loop=t._util.isAttributeSet(H)}},width:{get:function(){return I.width},set:function(H){G.width=H}},height:{get:function(){return I.height},
set:function(H){G.height=H}},currentTime:{get:function(){var H;if(K){G.currentTime=E.getCurrentTime();H=G.currentTime}else H=0;return H},set:function(H){x(H)}},duration:{get:function(){return a()}},ended:{get:function(){return G.ended}},paused:{get:function(){return G.paused}},seeking:{get:function(){return G.seeking}},readyState:{get:function(){return G.readyState}},networkState:{get:function(){return G.networkState}},volume:{get:function(){var H;H=K?E.getVolume():G.volume>-1?G.volume:1;return H/
100},set:function(H){if(H<0||H>1)throw"Volume value must be between 0.0 and 1.0";H*=100;C(H)}},muted:{get:function(){return G.muted},set:function(H){D(t._util.isAttributeSet(H))}},error:{get:function(){return G.error}}})}var h=10,i="",k=300,r=200,n=/^.*(?:\/|v=)(.{11})/,l=Math.abs,q=false,u=false,e=[];if(g.YT){g.quarantineYT=g.YT;g.YT=null}g.onYouTubeIframeAPIReady=function(){q=true;for(var z=e.length;z--;){e[z]();delete e[z]}};f.prototype=new p._MediaElementProto;f.prototype.constructor=f;f.prototype._canPlaySrc=
function(z){return/(?:http:\/\/www\.|http:\/\/|www\.|\.|^)(youtu)/.test(z)?"probably":i};f.prototype.canPlayType=function(z){return z==="video/x-youtube"?"probably":i};p.HTMLYouTubeVideoElement=function(z){return new f(z)};p.HTMLYouTubeVideoElement._canPlaySrc=f.prototype._canPlaySrc})(Popcorn,window,document);(function(p){var g=function(m,b){var c=0,f=0,h;p.forEach(b.classes,function(i,k){h=[];if(i==="parent")h[0]=document.querySelectorAll("#"+b.target)[0].parentNode;else h=document.querySelectorAll("#"+b.target+" "+i);c=0;for(f=h.length;c<f;c++)h[c].classList.toggle(k)})};p.compose("applyclass",{manifest:{about:{name:"Popcorn applyclass Effect",version:"0.1",author:"@scottdowne",website:"scottdowne.wordpress.com"},options:{}},_setup:function(m){m.classes={};m.applyclass=m.applyclass||"";for(var b=m.applyclass.replace(/\s/g,
"").split(","),c=[],f=0,h=b.length;f<h;f++){c=b[f].split(":");if(c[0])m.classes[c[0]]=c[1]||""}},start:g,end:g})})(Popcorn);(function(p){p.plugin("code",function(g){var m=false,b=this,c=function(){var f=function(h){return function(i,k){var r=function(){m&&i.call(b,k);m&&h(r)};r()}};return window.webkitRequestAnimationFrame?f(window.webkitRequestAnimationFrame):window.mozRequestAnimationFrame?f(window.mozRequestAnimationFrame):f(function(h){window.setTimeout(h,16)})}();if(!g.onStart||typeof g.onStart!=="function")g.onStart=p.nop;if(g.onEnd&&typeof g.onEnd!=="function")g.onEnd=undefined;if(g.onFrame&&typeof g.onFrame!==
"function")g.onFrame=undefined;return{start:function(f,h){h.onStart.call(b,h);if(h.onFrame){m=true;c(h.onFrame,h)}},end:function(f,h){if(h.onFrame)m=false;h.onEnd&&h.onEnd.call(b,h)}}},{about:{name:"Popcorn Code Plugin",version:"0.1",author:"David Humphrey (@humphd)",website:"http://vocamus.net/dave"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},onStart:{elem:"input",type:"function",label:"onStart"},onFrame:{elem:"input",type:"function",label:"onFrame",
optional:true},onEnd:{elem:"input",type:"function",label:"onEnd"}}})})(Popcorn);(function(p,g){var m={};p.plugin("documentcloud",{manifest:{about:{name:"Popcorn Document Cloud Plugin",version:"0.1",author:"@humphd, @ChrisDeCairos",website:"http://vocamus.net/dave"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},target:"documentcloud-container",width:{elem:"input",type:"text",label:"Width",optional:true},height:{elem:"input",type:"text",label:"Height",optional:true},src:{elem:"input",type:"url",label:"PDF URL","default":"http://www.documentcloud.org/documents/70050-urbina-day-1-in-progress.html"},
preload:{elem:"input",type:"checkbox",label:"Preload","default":true},page:{elem:"input",type:"number",label:"Page Number",optional:true},aid:{elem:"input",type:"number",label:"Annotation Id",optional:true}}},_setup:function(b){function c(){function n(w){b._key=w.api.getId();b._changeView=function(B){b.aid?B.pageSet.showAnnotation(B.api.getAnnotation(b.aid)):B.api.setCurrentPage(b.page)}}function l(){m[b._key]={num:1,id:b._containerId};h.loaded=true}h.loaded=false;var q=b.url.replace(/\.html$/,".js"),
u=b.target,e=g.getElementById(u),z=g.createElement("div"),v=p.position(e),A=b.width||v.width;v=b.height||v.height;var a=b.sidebar||true,d=b.text||true,j=b.pdf||true,o=b.showAnnotations||true,s=b.zoom||700,x=b.search||true;if(!function(w){var B=false;p.forEach(h.viewers,function(F){if(F.api.getSchema().canonicalURL===w){n(F);F=m[b._key];b._containerId=F.id;F.num+=1;B=true;h.loaded=true}});return B}(b.url)){z.id=b._containerId=p.guid(u);u="#"+z.id;e.appendChild(z);i.trigger("documentready");h.load(q,
{width:A,height:v,sidebar:a,text:d,pdf:j,showAnnotations:o,zoom:s,search:x,container:u,afterLoad:b.page||b.aid?function(w){n(w);b._changeView(w);z.style.visibility="hidden";w.elements.pages.hide();l()}:function(w){n(w);l();z.style.visibility="hidden";w.elements.pages.hide()}})}}function f(){window.DV.loaded?c():setTimeout(f,25)}var h=window.DV=window.DV||{},i=this;if(h.loading)f();else{h.loading=true;h.recordHit="//www.documentcloud.org/pixel.gif";var k=g.createElement("link"),r=g.getElementsByTagName("head")[0];
k.rel="stylesheet";k.type="text/css";k.media="screen";k.href="//s3.documentcloud.org/viewer/viewer-datauri.css";r.appendChild(k);h.loaded=false;p.getScript("http://s3.documentcloud.org/viewer/viewer.js",function(){h.loading=false;c()})}b.toString=function(){return b.src||b._natives.manifest.options.src["default"]}},start:function(b,c){var f=g.getElementById(c._containerId),h=DV.viewers[c._key];(c.page||c.aid)&&h&&c._changeView(h);if(f&&h){f.style.visibility="visible";h.elements.pages.show()}},end:function(b,
c){var f=g.getElementById(c._containerId);if(f&&DV.viewers[c._key]){f.style.visibility="hidden";DV.viewers[c._key].elements.pages.hide()}},_teardown:function(b){var c=g.getElementById(b._containerId);if((b=b._key)&&DV.viewers[b]&&--m[b].num===0){for(DV.viewers[b].api.unload();c.hasChildNodes();)c.removeChild(c.lastChild);c.parentNode.removeChild(c)}}})})(Popcorn,window.document);(function(p){var g=0;p.plugin("flickr",function(m){var b,c=document.getElementById(m.target),f,h,i,k,r=m.numberofimages||4,n=m.height||"50px",l=m.width||"50px",q=m.padding||"5px",u=m.border||"0px";b=document.createElement("div");b.id="flickr"+g;b.style.width="100%";b.style.height="100%";b.style.display="none";g++;c&&c.appendChild(b);var e=function(){if(f)setTimeout(function(){e()},5);else{h="http://api.flickr.com/services/rest/?method=flickr.people.findByUsername&";h+="username="+m.username+"&api_key="+
m.apikey+"&format=json&jsoncallback=flickr";p.getJSONP(h,function(v){f=v.user.nsid;z()})}},z=function(){h="http://api.flickr.com/services/feeds/photos_public.gne?";if(f)h+="id="+f+"&";if(m.tags)h+="tags="+m.tags+"&";h+="lang=en-us&format=json&jsoncallback=flickr";p.xhr.getJSONP(h,function(v){var A=document.createElement("div");A.innerHTML="<p style='padding:"+q+";'>"+v.title+"<p/>";p.forEach(v.items,function(a,d){if(d<r){i=document.createElement("a");i.setAttribute("href",a.link);i.setAttribute("target",
"_blank");k=document.createElement("img");k.setAttribute("src",a.media.m);k.setAttribute("height",n);k.setAttribute("width",l);k.setAttribute("style","border:"+u+";padding:"+q);i.appendChild(k);A.appendChild(i)}else return false});b.appendChild(A)})};if(m.username&&m.apikey)e();else{f=m.userid;z()}m.toString=function(){return m.tags||m.username||"Flickr"};return{start:function(){b.style.display="inline"},end:function(){b.style.display="none"},_teardown:function(v){document.getElementById(v.target)&&
document.getElementById(v.target).removeChild(b)}}},{about:{name:"Popcorn Flickr Plugin",version:"0.2",author:"Scott Downe, Steven Weerdenburg, Annasob",website:"http://scottdowne.wordpress.com/"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},userid:{elem:"input",type:"text",label:"User ID",optional:true},tags:{elem:"input",type:"text",label:"Tags"},username:{elem:"input",type:"text",label:"Username",optional:true},apikey:{elem:"input",type:"text",
label:"API Key",optional:true},target:"flickr-container",height:{elem:"input",type:"text",label:"Height","default":"50px",optional:true},width:{elem:"input",type:"text",label:"Width","default":"50px",optional:true},padding:{elem:"input",type:"text",label:"Padding",optional:true},border:{elem:"input",type:"text",label:"Border","default":"5px",optional:true},numberofimages:{elem:"input",type:"number","default":4,label:"Number of Images"}}})})(Popcorn);(function(p){p.plugin("footnote",{manifest:{about:{name:"Popcorn Footnote Plugin",version:"0.2",author:"@annasob, @rwaldron",website:"annasob.wordpress.com"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},text:{elem:"input",type:"text",label:"Text"},target:"footnote-container"}},_setup:function(g){var m=p.dom.find(g.target);g._container=document.createElement("div");g._container.style.display="none";g._container.innerHTML=g.text;m.appendChild(g._container)},
start:function(g,m){m._container.style.display="inline"},end:function(g,m){m._container.style.display="none"},_teardown:function(g){var m=p.dom.find(g.target);m&&m.removeChild(g._container)}})})(Popcorn);(function(p){var g=1,m=false;p.plugin("googlefeed",function(b){var c=function(){var k=false,r=0,n=document.getElementsByTagName("link"),l=n.length,q=document.head||document.getElementsByTagName("head")[0],u=document.createElement("link");if(window.GFdynamicFeedControl)m=true;else p.getScript("//www.google.com/uds/solutions/dynamicfeed/gfdynamicfeedcontrol.js",function(){m=true});for(;r<l;r++)if(n[r].href==="//www.google.com/uds/solutions/dynamicfeed/gfdynamicfeedcontrol.css")k=true;if(!k){u.type=
"text/css";u.rel="stylesheet";u.href="//www.google.com/uds/solutions/dynamicfeed/gfdynamicfeedcontrol.css";q.insertBefore(u,q.firstChild)}};window.google?c():p.getScript("//www.google.com/jsapi",function(){google.load("feeds","1",{callback:function(){c()}})});var f=document.createElement("div"),h=document.getElementById(b.target),i=function(){if(m)b.feed=new GFdynamicFeedControl(b.url,f,{vertical:b.orientation.toLowerCase()==="vertical"?true:false,horizontal:b.orientation.toLowerCase()==="horizontal"?
true:false,title:b.title=b.title||"Blog"});else setTimeout(function(){i()},5)};if(!b.orientation||b.orientation.toLowerCase()!=="vertical"&&b.orientation.toLowerCase()!=="horizontal")b.orientation="vertical";f.style.display="none";f.id="_feed"+g;f.style.width="100%";f.style.height="100%";g++;h&&h.appendChild(f);i();b.toString=function(){return b.url||b._natives.manifest.options.url["default"]};return{start:function(){f.setAttribute("style","display:inline")},end:function(){f.setAttribute("style",
"display:none")},_teardown:function(k){document.getElementById(k.target)&&document.getElementById(k.target).removeChild(f);delete k.feed}}},{about:{name:"Popcorn Google Feed Plugin",version:"0.1",author:"David Seifried",website:"dseifried.wordpress.com"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},target:"feed-container",url:{elem:"input",type:"url",label:"Feed URL","default":"http://planet.mozilla.org/rss20.xml"},title:{elem:"input",type:"text",
label:"Title","default":"Planet Mozilla",optional:true},orientation:{elem:"select",options:["Vertical","Horizontal"],label:"Orientation","default":"Vertical",optional:true}}})})(Popcorn);var googleCallback;
(function(p){function g(i,k,r){i=i.type?i.type.toUpperCase():"HYBRID";var n;if(i==="STAMEN-WATERCOLOR"||i==="STAMEN-TERRAIN"||i==="STAMEN-TONER")n=i.replace("STAMEN-","").toLowerCase();r=new google.maps.Map(r,{mapTypeId:n?n:google.maps.MapTypeId[i],mapTypeControlOptions:{mapTypeIds:[]}});n&&r.mapTypes.set(n,new google.maps.StamenMapType(n));r.getDiv().style.display="none";return r}var m=1,b=false,c=false,f,h;googleCallback=function(i){if(typeof google!=="undefined"&&google.maps&&google.maps.Geocoder&&
google.maps.LatLng){f=new google.maps.Geocoder;p.getScript("//maps.stamen.com/js/tile.stamen.js",function(){c=true})}else setTimeout(function(){googleCallback(i)},1)};h=function(){if(document.body){b=true;p.getScript("//maps.google.com/maps/api/js?sensor=false&callback=googleCallback")}else setTimeout(function(){h()},1)};p.plugin("googlemap",function(i){var k,r,n,l=document.getElementById(i.target);i.type=i.type||"ROADMAP";i.zoom=i.zoom||1;i.lat=i.lat||0;i.lng=i.lng||0;b||h();k=document.createElement("div");
k.id="actualmap"+m;k.style.width=i.width||"100%";k.style.height=i.height?i.height:l&&l.clientHeight?l.clientHeight+"px":"100%";m++;l&&l.appendChild(k);var q=function(){if(c){if(k)if(i.location)f.geocode({address:i.location},function(u,e){if(k&&e===google.maps.GeocoderStatus.OK){i.lat=u[0].geometry.location.lat();i.lng=u[0].geometry.location.lng();n=new google.maps.LatLng(i.lat,i.lng);r=g(i,n,k)}});else{n=new google.maps.LatLng(i.lat,i.lng);r=g(i,n,k)}}else setTimeout(function(){q()},5)};q();i.toString=
function(){return i.location||(i.lat&&i.lng?i.lat+", "+i.lng:i._natives.manifest.options.location["default"])};return{start:function(u,e){var z=this,v,A=function(){if(r){e._map=r;r.getDiv().style.display="block";google.maps.event.trigger(r,"resize");r.setCenter(n);if(e.zoom&&typeof e.zoom!=="number")e.zoom=+e.zoom;r.setZoom(e.zoom);if(e.heading&&typeof e.heading!=="number")e.heading=+e.heading;if(e.pitch&&typeof e.pitch!=="number")e.pitch=+e.pitch;if(e.type==="STREETVIEW"){r.setStreetView(v=new google.maps.StreetViewPanorama(k,
{position:n,pov:{heading:e.heading=e.heading||0,pitch:e.pitch=e.pitch||0,zoom:e.zoom}}));var a=function(B,F){var C=google.maps.geometry.spherical.computeHeading;setTimeout(function(){var D=z.media.currentTime;if(typeof e.tween==="object"){for(var t=0,y=B.length;t<y;t++){var I=B[t];if(D>=I.interval*(t+1)/1E3&&(D<=I.interval*(t+2)/1E3||D>=I.interval*y/1E3)){x.setPosition(new google.maps.LatLng(I.position.lat,I.position.lng));x.setPov({heading:I.pov.heading||C(I,B[t+1])||0,zoom:I.pov.zoom||0,pitch:I.pov.pitch||
0})}}a(B,B[0].interval)}else{t=0;for(y=B.length;t<y;t++){I=e.interval;if(D>=I*(t+1)/1E3&&(D<=I*(t+2)/1E3||D>=I*y/1E3)){d.setPov({heading:C(B[t],B[t+1])||0,zoom:e.zoom,pitch:e.pitch||0});d.setPosition(j[t])}}a(j,e.interval)}},F)};if(e.location&&typeof e.tween==="string"){var d=v,j=[],o=new google.maps.DirectionsService,s=new google.maps.DirectionsRenderer(d);o.route({origin:e.location,destination:e.tween,travelMode:google.maps.TravelMode.DRIVING},function(B,F){if(F==google.maps.DirectionsStatus.OK){s.setDirections(B);
for(var C=B.routes[0].overview_path,D=0,t=C.length;D<t;D++)j.push(new google.maps.LatLng(C[D].lat(),C[D].lng()));e.interval=e.interval||1E3;a(j,10)}})}else if(typeof e.tween==="object"){var x=v;o=0;for(var w=e.tween.length;o<w;o++){e.tween[o].interval=e.tween[o].interval||1E3;a(e.tween,10)}}}e.onmaploaded&&e.onmaploaded(e,r)}else setTimeout(function(){A()},13)};A()},end:function(){if(r)r.getDiv().style.display="none"},_teardown:function(u){var e=document.getElementById(u.target);e&&e.removeChild(k);
k=r=n=null;u._map=null}}},{about:{name:"Popcorn Google Map Plugin",version:"0.1",author:"@annasob",website:"annasob.wordpress.com"},options:{start:{elem:"input",type:"start",label:"Start"},end:{elem:"input",type:"start",label:"End"},target:"map-container",type:{elem:"select",options:["ROADMAP","SATELLITE","STREETVIEW","HYBRID","TERRAIN","STAMEN-WATERCOLOR","STAMEN-TERRAIN","STAMEN-TONER"],label:"Map Type",optional:true},zoom:{elem:"input",type:"text",label:"Zoom","default":0,optional:true},lat:{elem:"input",
type:"text",label:"Lat",optional:true},lng:{elem:"input",type:"text",label:"Lng",optional:true},location:{elem:"input",type:"text",label:"Location","default":"Toronto, Ontario, Canada"},heading:{elem:"input",type:"text",label:"Heading","default":0,optional:true},pitch:{elem:"input",type:"text",label:"Pitch","default":1,optional:true}}})})(Popcorn);(function(p){function g(c){function f(){var r=c.getBoundingClientRect(),n=i.getBoundingClientRect();if(n.left!==r.left)i.style.left=r.left+"px";if(n.top!==r.top)i.style.top=r.top+"px"}var h=-1,i=document.createElement("div"),k=getComputedStyle(c).zIndex;i.setAttribute("data-popcorn-helper-container",true);i.style.position="absolute";i.style.zIndex=isNaN(k)?m:k+1;document.body.appendChild(i);return{element:i,start:function(){h=setInterval(f,b)},stop:function(){clearInterval(h);h=-1},destroy:function(){document.body.removeChild(i);
h!==-1&&clearInterval(h)}}}var m=2E3,b=10;p.plugin("image",{manifest:{about:{name:"Popcorn image Plugin",version:"0.1",author:"Scott Downe",website:"http://scottdowne.wordpress.com/"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},src:{elem:"input",type:"url",label:"Image URL","default":"http://mozillapopcorn.org/wp-content/themes/popcorn/images/for_developers.png"},href:{elem:"input",type:"url",label:"Link","default":"http://mozillapopcorn.org/wp-content/themes/popcorn/images/for_developers.png",
optional:true},target:"image-container",text:{elem:"input",type:"text",label:"Caption","default":"Popcorn.js",optional:true}}},_setup:function(c){var f=document.createElement("img"),h=document.getElementById(c.target);c.anchor=document.createElement("a");c.anchor.style.position="relative";c.anchor.style.textDecoration="none";c.anchor.style.display="none";if(h)if(["VIDEO","AUDIO"].indexOf(h.nodeName)>-1){c.trackedContainer=g(h);c.trackedContainer.element.appendChild(c.anchor)}else h&&h.appendChild(c.anchor);
f.addEventListener("load",function(){f.style.borderStyle="none";c.anchor.href=c.href||c.src||"#";c.anchor.target="_blank";var i,k;f.style.height=h.style.height;f.style.width=h.style.width;c.anchor.appendChild(f);if(c.text){i=f.height/12+"px";k=document.createElement("div");p.extend(k.style,{color:"black",fontSize:i,fontWeight:"bold",position:"relative",textAlign:"center",width:f.style.width||f.width+"px",zIndex:"10"});k.innerHTML=c.text||"";k.style.top=(f.style.height.replace("px","")||f.height)/
2-k.offsetHeight/2+"px";c.anchor.insertBefore(k,f)}},false);f.src=c.src;c.toString=function(){var i=c.src||c._natives.manifest.options.src["default"],k=i.replace(/.*\//g,"");return k.length?k:i}},start:function(c,f){f.anchor.style.display="inline";f.trackedContainer&&f.trackedContainer.start()},end:function(c,f){f.anchor.style.display="none";f.trackedContainer&&f.trackedContainer.stop()},_teardown:function(c){if(c.trackedContainer)c.trackedContainer.destroy();else c.anchor.parentNode&&c.anchor.parentNode.removeChild(c.anchor)}})})(Popcorn);(function(p){var g=/(?:http:\/\/www\.|http:\/\/|www\.|\.|^)(youtu|vimeo|soundcloud|baseplayer)/,m={},b={vimeo:false,youtube:false,soundcloud:false,module:false};Object.defineProperty(m,void 0,{get:function(){return b[void 0]},set:function(c){b[void 0]=c}});p.plugin("mediaspawner",{manifest:{about:{name:"Popcorn Media Spawner Plugin",version:"0.1",author:"Matthew Schranz, @mjschranz",website:"mschranz.wordpress.com"},options:{source:{elem:"input",type:"text",label:"Media Source","default":"http://www.youtube.com/watch?v=CXDstfD9eJ0"},
caption:{elem:"input",type:"text",label:"Media Caption","default":"Popcorn Popping",optional:true},target:"mediaspawner-container",start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},autoplay:{elem:"input",type:"checkbox",label:"Autoplay Video",optional:true},width:{elem:"input",type:"number",label:"Media Width","default":400,units:"px",optional:true},height:{elem:"input",type:"number",label:"Media Height","default":200,units:"px",optional:true}}},_setup:function(c){function f(){function l(){if(k!==
"HTML5"&&!window.Popcorn[k])setTimeout(function(){l()},300);else{c.id=c._container.id;c._container.style.width=c.width+"px";c._container.style.height=c.height+"px";c.popcorn=p.smart("#"+c.id,c.source);k==="HTML5"&&c.popcorn.controls(true);c._container.style.width="0px";c._container.style.height="0px";c._container.style.visibility="hidden";c._container.style.overflow="hidden"}}if(k!=="HTML5"&&!window.Popcorn[k]&&!m[k]){m[k]=true;p.getScript("http://popcornjs.org/code/players/"+k+"/popcorn."+k+".js",
function(){l()})}else l()}function h(){window.Popcorn.player?f():setTimeout(function(){h()},300)}var i=document.getElementById(c.target)||{},k,r,n;if(r=g.exec(c.source)){k=r[1];if(k==="youtu")k="youtube"}else k="HTML5";c._type=k;c._container=document.createElement("div");r=c._container;r.id="mediaSpawnerdiv-"+p.guid();c.width=c.width||400;c.height=c.height||200;if(c.caption){n=document.createElement("div");n.innerHTML=c.caption;n.style.display="none";c._capCont=n;r.appendChild(n)}i&&i.appendChild(r);
if(!window.Popcorn.player&&!m.module){m.module=true;p.getScript("http://popcornjs.org/code/modules/player/popcorn.player.js",h)}else h();c.toString=function(){return c.source||c._natives.manifest.options.source["default"]}},start:function(c,f){if(f._capCont)f._capCont.style.display="";f._container.style.width=f.width+"px";f._container.style.height=f.height+"px";f._container.style.visibility="visible";f._container.style.overflow="visible";f.autoplay&&f.popcorn.play()},end:function(c,f){if(f._capCont)f._capCont.style.display=
"none";f._container.style.width="0px";f._container.style.height="0px";f._container.style.visibility="hidden";f._container.style.overflow="hidden";f.popcorn.pause()},_teardown:function(c){c.popcorn&&c.popcorn.destory&&c.popcorn.destroy();document.getElementById(c.target)&&document.getElementById(c.target).removeChild(c._container)}})})(Popcorn,this);(function(p){p.plugin("mustache",function(g){var m,b,c,f;p.getScript("http://mustache.github.com/extras/mustache.js");var h=!!g.dynamic,i=typeof g.template,k=typeof g.data,r=document.getElementById(g.target);g.container=r||document.createElement("div");if(i==="function")if(h)c=g.template;else f=g.template(g);else f=i==="string"?g.template:"";if(k==="function")if(h)m=g.data;else b=g.data(g);else b=k==="string"?JSON.parse(g.data):k==="object"?g.data:"";return{start:function(n,l){var q=function(){if(window.Mustache){if(m)b=
m(l);if(c)f=c(l);var u=Mustache.to_html(f,b).replace(/^\s*/mg,"");l.container.innerHTML=u}else setTimeout(function(){q()},10)};q()},end:function(n,l){l.container.innerHTML=""},_teardown:function(){m=b=c=f=null}}},{about:{name:"Popcorn Mustache Plugin",version:"0.1",author:"David Humphrey (@humphd)",website:"http://vocamus.net/dave"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},target:"mustache-container",template:{elem:"input",type:"text",
label:"Template"},data:{elem:"input",type:"text",label:"Data"},dynamic:{elem:"input",type:"checkbox",label:"Dynamic","default":true}}})})(Popcorn);(function(p){function g(b,c){if(b.map)b.map.div.style.display=c;else setTimeout(function(){g(b,c)},10)}var m=1;p.plugin("openmap",function(b){var c,f,h,i,k,r,n,l,q=document.getElementById(b.target);c=document.createElement("div");c.id="openmapdiv"+m;c.style.width="100%";c.style.height="100%";m++;q&&q.appendChild(c);l=function(){if(window.OpenLayers&&window.OpenLayers.Layer.Stamen){if(b.location){location=new OpenLayers.LonLat(0,0);p.getJSONP("//tinygeocoder.com/create-api.php?q="+b.location+"&callback=jsonp",
function(e){f=new OpenLayers.LonLat(e[1],e[0])})}else f=new OpenLayers.LonLat(b.lng,b.lat);b.type=b.type||"ROADMAP";switch(b.type){case "SATELLITE":b.map=new OpenLayers.Map({div:c,maxResolution:0.28125,tileSize:new OpenLayers.Size(512,512)});var u=new OpenLayers.Layer.WorldWind("LANDSAT","//worldwind25.arc.nasa.gov/tile/tile.aspx",2.25,4,{T:"105"});b.map.addLayer(u);i=new OpenLayers.Projection("EPSG:4326");h=new OpenLayers.Projection("EPSG:4326");break;case "TERRAIN":i=new OpenLayers.Projection("EPSG:4326");
h=new OpenLayers.Projection("EPSG:4326");b.map=new OpenLayers.Map({div:c,projection:h});u=new OpenLayers.Layer.WMS("USGS Terraserver","//terraserver-usa.org/ogcmap.ashx?",{layers:"DRG"});b.map.addLayer(u);break;case "STAMEN-TONER":case "STAMEN-WATERCOLOR":case "STAMEN-TERRAIN":u=b.type.replace("STAMEN-","").toLowerCase();u=new OpenLayers.Layer.Stamen(u);i=new OpenLayers.Projection("EPSG:4326");h=new OpenLayers.Projection("EPSG:900913");f=f.transform(i,h);b.map=new OpenLayers.Map({div:c,projection:h,
displayProjection:i,controls:[new OpenLayers.Control.Navigation,new OpenLayers.Control.PanPanel,new OpenLayers.Control.ZoomPanel]});b.map.addLayer(u);break;default:h=new OpenLayers.Projection("EPSG:900913");i=new OpenLayers.Projection("EPSG:4326");f=f.transform(i,h);b.map=new OpenLayers.Map({div:c,projection:h,displayProjection:i});u=new OpenLayers.Layer.OSM;b.map.addLayer(u)}if(b.map){b.map.setCenter(f,b.zoom||10);b.map.div.style.display="none"}}else setTimeout(function(){l()},50)};l();return{_setup:function(u){window.OpenLayers||
p.getScript("//openlayers.org/api/OpenLayers.js",function(){p.getScript("//maps.stamen.com/js/tile.stamen.js")});var e=function(){if(u.map){u.zoom=u.zoom||2;if(u.zoom&&typeof u.zoom!=="number")u.zoom=+u.zoom;u.map.setCenter(f,u.zoom);if(u.markers){var z=OpenLayers.Util.extend({},OpenLayers.Feature.Vector.style["default"]),v=function(w){clickedFeature=w.feature;if(clickedFeature.attributes.text){n=new OpenLayers.Popup.FramedCloud("featurePopup",clickedFeature.geometry.getBounds().getCenterLonLat(),
new OpenLayers.Size(120,250),clickedFeature.attributes.text,null,true,function(){r.unselect(this.feature)});clickedFeature.popup=n;n.feature=clickedFeature;u.map.addPopup(n)}},A=function(w){feature=w.feature;if(feature.popup){n.feature=null;u.map.removePopup(feature.popup);feature.popup.destroy();feature.popup=null}},a=function(w){p.getJSONP("//tinygeocoder.com/create-api.php?q="+w.location+"&callback=jsonp",function(B){B=(new OpenLayers.Geometry.Point(B[1],B[0])).transform(i,h);var F=OpenLayers.Util.extend({},
z);if(!w.size||isNaN(w.size))w.size=14;F.pointRadius=w.size;F.graphicOpacity=1;F.externalGraphic=w.icon;B=new OpenLayers.Feature.Vector(B,null,F);if(w.text)B.attributes={text:w.text};k.addFeatures([B])})};k=new OpenLayers.Layer.Vector("Point Layer",{style:z});u.map.addLayer(k);for(var d=0,j=u.markers.length;d<j;d++){var o=u.markers[d];if(o.text)if(!r){r=new OpenLayers.Control.SelectFeature(k);u.map.addControl(r);r.activate();k.events.on({featureselected:v,featureunselected:A})}if(o.location)a(o);
else{var s=(new OpenLayers.Geometry.Point(o.lng,o.lat)).transform(i,h),x=OpenLayers.Util.extend({},z);if(!o.size||isNaN(o.size))o.size=14;x.pointRadius=o.size;x.graphicOpacity=1;x.externalGraphic=o.icon;s=new OpenLayers.Feature.Vector(s,null,x);if(o.text)s.attributes={text:o.text};k.addFeatures([s])}}}}else setTimeout(function(){e()},13)};e()},start:function(u,e){g(e,"block")},end:function(u,e){g(e,"none")},_teardown:function(){q&&q.removeChild(c);c=map=f=h=i=k=r=n=null}}},{about:{name:"Popcorn OpenMap Plugin",
version:"0.3",author:"@mapmeld",website:"mapadelsur.blogspot.com"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},target:"map-container",type:{elem:"select",options:["ROADMAP","SATELLITE","TERRAIN"],label:"Map Type",optional:true},zoom:{elem:"input",type:"number",label:"Zoom","default":2},lat:{elem:"input",type:"text",label:"Lat",optional:true},lng:{elem:"input",type:"text",label:"Lng",optional:true},location:{elem:"input",type:"text",label:"Location",
"default":"Toronto, Ontario, Canada"},markers:{elem:"input",type:"text",label:"List Markers",optional:true}}})})(Popcorn);document.addEventListener("click",function(p){p=p.target;if(p.nodeName==="A"||p.parentNode&&p.parentNode.nodeName==="A")Popcorn.instances.forEach(function(g){g.options.pauseOnLinkClicked&&g.pause()})},false);(function(p){var g=0,m=function(b,c){var f=b.container=document.createElement("div"),h=f.style,i=b.media,k=function(){var r=b.position();h.fontSize="18px";h.width=i.offsetWidth+"px";h.top=r.top+i.offsetHeight-f.offsetHeight-40+"px";h.left=r.left+"px";setTimeout(k,10)};f.id=c||p.guid();h.position="absolute";h.color="white";h.textShadow="black 2px 2px 6px";h.fontWeight="bold";h.textAlign="center";k();b.media.parentNode.appendChild(f);return f};p.plugin("subtitle",{manifest:{about:{name:"Popcorn Subtitle Plugin",
version:"0.1",author:"Scott Downe",website:"http://scottdowne.wordpress.com/"},options:{start:{elem:"input",type:"text",label:"Start"},end:{elem:"input",type:"text",label:"End"},target:"subtitle-container",text:{elem:"input",type:"text",label:"Text"}}},_setup:function(b){var c=document.createElement("div");c.id="subtitle-"+g++;c.style.display="none";!this.container&&(!b.target||b.target==="subtitle-container")&&m(this);b.container=b.target&&b.target!=="subtitle-container"?document.getElementById(b.target)||
m(this,b.target):this.container;document.getElementById(b.container.id)&&document.getElementById(b.container.id).appendChild(c);b.innerContainer=c;b.showSubtitle=function(){b.innerContainer.innerHTML=b.text||""}},start:function(b,c){c.innerContainer.style.display="inline";c.showSubtitle(c,c.text)},end:function(b,c){c.innerContainer.style.display="none";c.innerContainer.innerHTML=""},_teardown:function(b){b.container.removeChild(b.innerContainer)}})})(Popcorn);(function(p){function g(c){return String(c).replace(/&(?!\w+;)|[<>"']/g,function(f){return b[f]||f})}function m(c,f){var h=c.container=document.createElement("div"),i=h.style,k=c.media,r=function(){var n=c.position();i.fontSize="18px";i.width=k.offsetWidth+"px";i.top=n.top+k.offsetHeight-h.offsetHeight-40+"px";i.left=n.left+"px";setTimeout(r,10)};h.id=f||"";i.position="absolute";i.color="white";i.textShadow="black 2px 2px 6px";i.fontWeight="bold";i.textAlign="center";r();c.media.parentNode.appendChild(h);
return h}var b={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};p.plugin("text",{manifest:{about:{name:"Popcorn Text Plugin",version:"0.1",author:"@humphd"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},text:{elem:"input",type:"text",label:"Text","default":"Popcorn.js"},escape:{elem:"input",type:"checkbox",label:"Escape"},multiline:{elem:"input",type:"checkbox",label:"Multiline"}}},_setup:function(c){var f,h,i=c._container=document.createElement("div");
i.style.display="none";if(c.target)if(f=p.dom.find(c.target)){if(["VIDEO","AUDIO"].indexOf(f.nodeName)>-1)f=m(this,c.target+"-overlay")}else f=m(this,c.target);else f=this.container?this.container:m(this);c._target=f;h=c.escape?g(c.text):c.text;h=c.multiline?h.replace(/\r?\n/gm,"<br>"):h;i.innerHTML=h||"";f.appendChild(i);c.toString=function(){return c.text||c._natives.manifest.options.text["default"]}},start:function(c,f){f._container.style.display="inline"},end:function(c,f){f._container.style.display=
"none"},_teardown:function(c){var f=c._target;f&&f.removeChild(c._container)}})})(Popcorn);(function(p){var g=1;p.plugin("timeline",function(m){var b=document.getElementById(m.target),c=document.createElement("div"),f,h=true;if(b&&!b.firstChild){b.appendChild(f=document.createElement("div"));f.style.width="inherit";f.style.height="inherit";f.style.overflow="auto"}else f=b.firstChild;c.style.display="none";c.id="timelineDiv"+g;m.direction=m.direction||"up";if(m.direction.toLowerCase()==="down")h=false;if(b&&f)h?f.insertBefore(c,f.firstChild):f.appendChild(c);g++;c.innerHTML="<p><span id='big' style='font-size:24px; line-height: 130%;' >"+
m.title+"</span><br /><span id='mid' style='font-size: 16px;'>"+m.text+"</span><br />"+m.innerHTML;return{start:function(i,k){c.style.display="block";if(k.direction==="down")f.scrollTop=f.scrollHeight},end:function(){c.style.display="none"},_teardown:function(){f&&c&&f.removeChild(c)&&!f.firstChild&&b.removeChild(f)}}},{about:{name:"Popcorn Timeline Plugin",version:"0.1",author:"David Seifried @dcseifried",website:"dseifried.wordpress.com"},options:{start:{elem:"input",type:"number",label:"Start"},
end:{elem:"input",type:"number",label:"End"},target:"feed-container",title:{elem:"input",type:"text",label:"Title"},text:{elem:"input",type:"text",label:"Text"},innerHTML:{elem:"input",type:"text",label:"HTML Code",optional:true},direction:{elem:"select",options:["DOWN","UP"],label:"Direction",optional:true}}})})(Popcorn);(function(p){var g=false;p.plugin("twitter",{manifest:{about:{name:"Popcorn Twitter Plugin",version:"0.1",author:"Scott Downe",website:"http://scottdowne.wordpress.com/"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},src:{elem:"input",type:"text",label:"Tweet Source (# or @)","default":"@popcornjs"},target:"twitter-container",height:{elem:"input",type:"number",label:"Height","default":"200",optional:true},width:{elem:"input",type:"number",label:"Width",
"default":"250",optional:true}}},_setup:function(m){if(!window.TWTR&&!g){g=true;p.getScript("//widgets.twimg.com/j/2/widget.js")}var b=document.getElementById(m.target);m.container=document.createElement("div");m.container.setAttribute("id",p.guid());m.container.style.display="none";b&&b.appendChild(m.container);var c=m.src||"";b=m.width||250;var f=m.height||200,h=/^@/.test(c),i={version:2,id:m.container.getAttribute("id"),rpp:30,width:b,height:f,interval:6E3,theme:{shell:{background:"#ffffff",color:"#000000"},
tweets:{background:"#ffffff",color:"#444444",links:"#1985b5"}},features:{loop:true,timestamp:true,avatars:true,hashtags:true,toptweets:true,live:true,scrollbar:false,behavior:"default"}},k=function(r){if(window.TWTR)if(h){i.type="profile";(new TWTR.Widget(i)).render().setUser(c).start()}else{i.type="search";i.search=c;i.subject=c;(new TWTR.Widget(i)).render().start()}else setTimeout(function(){k(r)},1)};m.toString=function(){return m.src||m._natives.manifest.options.src["default"]};k(this)},start:function(m,
b){b.container.style.display="inline"},end:function(m,b){b.container.style.display="none"},_teardown:function(m){document.getElementById(m.target)&&document.getElementById(m.target).removeChild(m.container)}})})(Popcorn);(function(p){p.plugin("webpage",{manifest:{about:{name:"Popcorn Webpage Plugin",version:"0.1",author:"@annasob",website:"annasob.wordpress.com"},options:{id:{elem:"input",type:"text",label:"Id",optional:true},start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},src:{elem:"input",type:"url",label:"Webpage URL","default":"http://mozillapopcorn.org"},target:"iframe-container"}},_setup:function(g){var m=document.getElementById(g.target);g.src=g.src.replace(/^(https?:)?(\/\/)?/,
"//");g._iframe=document.createElement("iframe");g._iframe.setAttribute("width","100%");g._iframe.setAttribute("height","100%");g._iframe.id=g.id;g._iframe.src=g.src;g._iframe.style.display="none";m&&m.appendChild(g._iframe)},start:function(g,m){m._iframe.src=m.src;m._iframe.style.display="inline"},end:function(g,m){m._iframe.style.display="none"},_teardown:function(g){document.getElementById(g.target)&&document.getElementById(g.target).removeChild(g._iframe)}})})(Popcorn);var wikiCallback;
(function(p){p.plugin("wikipedia",{manifest:{about:{name:"Popcorn Wikipedia Plugin",version:"0.1",author:"@annasob",website:"annasob.wordpress.com"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},lang:{elem:"input",type:"text",label:"Language","default":"english",optional:true},src:{elem:"input",type:"url",label:"Wikipedia URL","default":"http://en.wikipedia.org/wiki/Cat"},title:{elem:"input",type:"text",label:"Title","default":"Cats",optional:true},
numberofwords:{elem:"input",type:"number",label:"Number of Words","default":"200",optional:true},target:"wikipedia-container"}},_setup:function(g){var m,b=p.guid();if(!g.lang)g.lang="en";g.numberofwords=g.numberofwords||200;window["wikiCallback"+b]=function(c){g._link=document.createElement("a");g._link.setAttribute("href",g.src);g._link.setAttribute("target","_blank");g._link.innerHTML=g.title||c.parse.displaytitle;g._desc=document.createElement("p");m=c.parse.text["*"].substr(c.parse.text["*"].indexOf("<p>"));
m=m.replace(/((<(.|\n)+?>)|(\((.*?)\) )|(\[(.*?)\]))/g,"");m=m.split(" ");g._desc.innerHTML=m.slice(0,m.length>=g.numberofwords?g.numberofwords:m.length).join(" ")+" ...";g._fired=true};g.src&&p.getScript("//"+g.lang+".wikipedia.org/w/api.php?action=parse&props=text&redirects&page="+g.src.slice(g.src.lastIndexOf("/")+1)+"&format=json&callback=wikiCallback"+b);g.toString=function(){return g.src||g._natives.manifest.options.src["default"]}},start:function(g,m){var b=function(){if(m._fired){if(m._link&&
m._desc)if(document.getElementById(m.target)){document.getElementById(m.target).appendChild(m._link);document.getElementById(m.target).appendChild(m._desc);m._added=true}}else setTimeout(function(){b()},13)};b()},end:function(g,m){if(m._added){document.getElementById(m.target).removeChild(m._link);document.getElementById(m.target).removeChild(m._desc)}},_teardown:function(g){if(g._added){g._link.parentNode&&document.getElementById(g.target).removeChild(g._link);g._desc.parentNode&&document.getElementById(g.target).removeChild(g._desc);
delete g.target}}})})(Popcorn);(function(p){var g={},m=0,b=document.createElement("span"),c=["webkit","Moz","ms","O",""],f=["Transform","TransitionDuration","TransitionTimingFunction"],h={},i;document.getElementsByTagName("head")[0].appendChild(b);for(var k=0,r=f.length;k<r;k++)for(var n=0,l=c.length;n<l;n++){i=c[n]+f[k];if(i in b.style){h[f[k].toLowerCase()]=i;break}}document.getElementsByTagName("head")[0].appendChild(b);p.plugin("wordriver",{manifest:{about:{name:"Popcorn WordRiver Plugin"},options:{start:{elem:"input",type:"number",
label:"Start"},end:{elem:"input",type:"number",label:"End"},target:"wordriver-container",text:{elem:"input",type:"text",label:"Text","default":"Popcorn.js"},color:{elem:"input",type:"text",label:"Color","default":"Green",optional:true}}},_setup:function(q){q._duration=q.end-q.start;var u;if(!(u=g[q.target])){u=q.target;g[u]=document.createElement("div");var e=document.getElementById(u);e&&e.appendChild(g[u]);g[u].style.height="100%";g[u].style.position="relative";u=g[u]}q._container=u;q.word=document.createElement("span");
q.word.style.position="absolute";q.word.style.whiteSpace="nowrap";q.word.style.opacity=0;q.word.style.MozTransitionProperty="opacity, -moz-transform";q.word.style.webkitTransitionProperty="opacity, -webkit-transform";q.word.style.OTransitionProperty="opacity, -o-transform";q.word.style.transitionProperty="opacity, transform";q.word.style[h.transitionduration]="1s, "+q._duration+"s";q.word.style[h.transitiontimingfunction]="linear";q.word.innerHTML=q.text;q.word.style.color=q.color||"black"},start:function(q,
u){u._container.appendChild(u.word);u.word.style[h.transform]="";u.word.style.fontSize=~~(30+20*Math.random())+"px";m%=u._container.offsetWidth-u.word.offsetWidth;u.word.style.left=m+"px";m+=u.word.offsetWidth+10;u.word.style[h.transform]="translateY("+(u._container.offsetHeight-u.word.offsetHeight)+"px)";u.word.style.opacity=1;setTimeout(function(){u.word.style.opacity=0},(u.end-u.start-1||1)*1E3)},end:function(q,u){u.word.style.opacity=0},_teardown:function(q){var u=document.getElementById(q.target);
q.word.parentNode&&q._container.removeChild(q.word);g[q.target]&&!g[q.target].childElementCount&&u&&u.removeChild(g[q.target])&&delete g[q.target]}})})(Popcorn);(function(p){p.parser("parseJSON","JSON",function(g){var m={title:"",remote:"",data:[]};p.forEach(g.data,function(b){m.data.push(b)});return m})})(Popcorn);(function(p){p.parser("parseSBV",function(g){var m={title:"",remote:"",data:[]},b=[],c=0,f=0,h=function(q){q=q.split(":");var u=q.length-1,e;try{e=parseInt(q[u-1],10)*60+parseFloat(q[u],10);if(u===2)e+=parseInt(q[0],10)*3600}catch(z){throw"Bad cue";}return e},i=function(q,u){var e={};e[q]=u;return e};g=g.text.split(/(?:\r\n|\r|\n)/gm);for(f=g.length;c<f;){var k={},r=[],n=g[c++].split(",");try{k.start=h(n[0]);for(k.end=h(n[1]);c<f&&g[c];)r.push(g[c++]);k.text=r.join("<br />");b.push(i("subtitle",k))}catch(l){for(;c<
f&&g[c];)c++}for(;c<f&&!g[c];)c++}m.data=b;return m})})(Popcorn);(function(p){function g(b,c){var f={};f[b]=c;return f}function m(b){b=b.split(":");try{var c=b[2].split(",");if(c.length===1)c=b[2].split(".");return parseFloat(b[0],10)*3600+parseFloat(b[1],10)*60+parseFloat(c[0],10)+parseFloat(c[1],10)/1E3}catch(f){return 0}}p.parser("parseSRT",function(b){var c={title:"",remote:"",data:[]},f=[],h=0,i=0,k,r,n,l;b=b.text.split(/(?:\r\n|\r|\n)/gm);for(h=b.length-1;h>=0&&!b[h];)h--;n=h+1;for(h=0;h<n;h++){l={};r=[];l.id=parseInt(b[h++],10);k=b[h++].split(/[\t ]*--\>[\t ]*/);
l.start=m(k[0]);i=k[1].indexOf(" ");if(i!==-1)k[1]=k[1].substr(0,i);for(l.end=m(k[1]);h<n&&b[h];)r.push(b[h++]);l.text=r.join("\\N").replace(/\{(\\[\w]+\(?([\w\d]+,?)+\)?)+\}/gi,"");l.text=l.text.replace(/</g,"&lt;").replace(/>/g,"&gt;");l.text=l.text.replace(/&lt;(\/?(font|b|u|i|s))((\s+(\w|\w[\w\-]*\w)(\s*=\s*(?:\".*?\"|'.*?'|[^'\">\s]+))?)+\s*|\s*)(\/?)&gt;/gi,"<$1$3$7>");l.text=l.text.replace(/\\N/gi,"<br />");f.push(g("subtitle",l))}c.data=f;return c})})(Popcorn);(function(p){function g(c,f){var h=c.substr(10).split(","),i;i={start:m(h[f.start]),end:m(h[f.end])};if(i.start===-1||i.end===-1)throw"Invalid time";var k=q.call(n,/\{(\\[\w]+\(?([\w\d]+,?)+\)?)+\}/gi,""),r=k.replace,n;n=h.length;q=[];for(var l=f.text;l<n;l++)q.push(h[l]);n=q.join(",");var q=n.replace;i.text=r.call(k,/\\N/gi,"<br />");return i}function m(c){var f=c.split(":");if(c.length!==10||f.length<3)return-1;return parseInt(f[0],10)*3600+parseInt(f[1],10)*60+parseFloat(f[2],10)}function b(c,
f){var h={};h[c]=f;return h}p.parser("parseSSA",function(c){var f={title:"",remote:"",data:[]},h=[],i=0,k;c=c.text.split(/(?:\r\n|\r|\n)/gm);for(k=c.length;i<k&&c[i]!=="[Events]";)i++;var r=c[++i].substr(8).split(", "),n={},l,q;q=0;for(l=r.length;q<l;q++)if(r[q]==="Start")n.start=q;else if(r[q]==="End")n.end=q;else if(r[q]==="Text")n.text=q;for(;++i<k&&c[i]&&c[i][0]!=="[";)try{h.push(b("subtitle",g(c[i],n)))}catch(u){}f.data=h;return f})})(Popcorn);(function(p){function g(i,k,r){var n=i.firstChild;i=m(i,r);r=[];for(var l;n;){if(n.nodeType===1)if(n.nodeName==="p")r.push(b(n,k,i));else if(n.nodeName==="div"){l=c(n.getAttribute("begin"));if(l<0)l=k;r.push.apply(r,g(n,l,i))}n=n.nextSibling}return r}function m(i,k){var r=i.getAttribute("region");return r!==null?r:k||""}function b(i,k,r){var n={};n.text=(i.textContent||i.text).replace(f,"").replace(h,"<br />");n.id=i.getAttribute("xml:id")||i.getAttribute("id");n.start=c(i.getAttribute("begin"),k);
n.end=c(i.getAttribute("end"),k);n.target=m(i,r);if(n.end<0){n.end=c(i.getAttribute("duration"),0);if(n.end>=0)n.end+=n.start;else n.end=Number.MAX_VALUE}return{subtitle:n}}function c(i,k){var r;if(!i)return-1;try{return p.util.toSeconds(i)}catch(n){for(var l=i.length-1;l>=0&&i[l]<="9"&&i[l]>="0";)l--;r=l;l=parseFloat(i.substring(0,r));r=i.substring(r);return l*({h:3600,m:60,s:1,ms:0.0010}[r]||-1)+(k||0)}}var f=/^[\s]+|[\s]+$/gm,h=/(?:\r\n|\r|\n)/gm;p.parser("parseTTML",function(i){var k={title:"",
remote:"",data:[]};if(!i.xml||!i.xml.documentElement)return k;i=i.xml.documentElement.firstChild;if(!i)return k;for(;i.nodeName!=="body";)i=i.nextSibling;if(i)k.data=g(i,0);return k})})(Popcorn);(function(p){p.parser("parseTTXT",function(g){var m={title:"",remote:"",data:[]},b=function(k){k=k.split(":");var r=0;try{return parseFloat(k[0],10)*60*60+parseFloat(k[1],10)*60+parseFloat(k[2],10)}catch(n){r=0}return r},c=function(k,r){var n={};n[k]=r;return n};g=g.xml.lastChild.lastChild;for(var f=Number.MAX_VALUE,h=[];g;){if(g.nodeType===1&&g.nodeName==="TextSample"){var i={};i.start=b(g.getAttribute("sampleTime"));i.text=g.getAttribute("text");if(i.text){i.end=f-0.0010;h.push(c("subtitle",i))}f=
i.start}g=g.previousSibling}m.data=h.reverse();return m})})(Popcorn);(function(p){function g(b){var c=b.split(":");b=b.length;var f;if(b!==12&&b!==9)throw"Bad cue";b=c.length-1;try{f=parseInt(c[b-1],10)*60+parseFloat(c[b],10);if(b===2)f+=parseInt(c[0],10)*3600}catch(h){throw"Bad cue";}return f}function m(b,c){var f={};f[b]=c;return f}p.parser("parseVTT",function(b){var c={title:"",remote:"",data:[]},f=[],h=0,i=0,k,r;b=b.text.split(/(?:\r\n|\r|\n)/gm);i=b.length;if(i===0||b[0]!=="WEBVTT")return c;for(h++;h<i;){k=[];try{for(var n=h;n<i&&!b[n];)n++;h=n;var l=b[h++];n=
void 0;var q={};if(!l||l.indexOf("--\>")===-1)throw"Bad cue";n=l.replace(/--\>/," --\> ").split(/[\t ]+/);if(n.length<2)throw"Bad cue";q.id=l;q.start=g(n[0]);q.end=g(n[2]);for(r=q;h<i&&b[h];)k.push(b[h++]);r.text=k.join("<br />");f.push(m("subtitle",r))}catch(u){for(h=h;h<i&&b[h];)h++;h=h}}c.data=f;return c})})(Popcorn);(function(p){p.parser("parseXML","XML",function(g){var m={title:"",remote:"",data:[]},b={},c=function(n){n=n.split(":");if(n.length===1)return parseFloat(n[0],10);else if(n.length===2)return parseFloat(n[0],10)+parseFloat(n[1]/12,10);else if(n.length===3)return parseInt(n[0]*60,10)+parseFloat(n[1],10)+parseFloat(n[2]/12,10);else if(n.length===4)return parseInt(n[0]*3600,10)+parseInt(n[1]*60,10)+parseFloat(n[2],10)+parseFloat(n[3]/12,10)},f=function(n){for(var l={},q=0,u=n.length;q<u;q++){var e=n.item(q).nodeName,
z=n.item(q).nodeValue,v=b[z];if(e==="in")l.start=c(z);else if(e==="out")l.end=c(z);else if(e==="resourceid")for(var A in v){if(v.hasOwnProperty(A))if(!l[A]&&A!=="id")l[A]=v[A]}else l[e]=z}return l},h=function(n,l){var q={};q[n]=l;return q},i=function(n,l,q){var u={};p.extend(u,l,f(n.attributes),{text:n.textContent||n.text});l=n.childNodes;if(l.length<1||l.length===1&&l[0].nodeType===3)if(q)b[u.id]=u;else m.data.push(h(n.nodeName,u));else for(n=0;n<l.length;n++)l[n].nodeType===1&&i(l[n],u,q)};g=g.documentElement.childNodes;
for(var k=0,r=g.length;k<r;k++)if(g[k].nodeType===1)g[k].nodeName==="manifest"?i(g[k],{},true):i(g[k],{},false);return m})})(Popcorn);(function(p,g){g.player("soundcloud",{_canPlayType:function(m,b){return typeof b==="string"&&g.HTMLSoundCloudAudioElement._canPlaySrc(b)&&m.toLowerCase()!=="audio"}});g.soundcloud=function(m,b,c){typeof console!=="undefined"&&console.warn&&console.warn("Deprecated player 'soundcloud'. Please use Popcorn.HTMLSoundCloudAudioElement directly.");var f=g.HTMLSoundCloudAudioElement(m);m=g(f,c);setTimeout(function(){f.src=b},0);return m}})(window,Popcorn);(function(){function p(m){var b=p.options;m=b.parser[b.strictMode?"strict":"loose"].exec(m);for(var c={},f=14;f--;)c[b.key[f]]=m[f]||"";c[b.q.name]={};c[b.key[12]].replace(b.q.parser,function(h,i,k){if(i)c[b.q.name][i]=k});return c}function g(m,b){return/player.vimeo.com\/video\/\d+/.test(b)||/vimeo.com\/\d+/.test(b)}p.options={strictMode:false,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",
parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}};Popcorn.player("vimeo",{_canPlayType:g,_setup:function(m){function b(j,o){var s=v.src.split("?")[0],x=JSON.stringify({method:j,
value:o});if(s.substr(0,2)==="//")s=window.location.protocol+s;v.contentWindow?v.contentWindow.postMessage(x,s):l.unload()}function c(j){if(j.origin==="http://player.vimeo.com"){var o;try{o=JSON.parse(j.data)}catch(s){console.warn(s)}if(o.player_id==n){o.method&&a[o.method]&&a[o.method](o);o.event&&d[o.event]&&d[o.event](o)}}}function f(){e||(e=setInterval(function(){l.dispatchEvent("timeupdate")},i));u||(u=setInterval(function(){b("getCurrentTime")},k))}function h(){if(e){clearInterval(e);e=0}if(u){clearInterval(u);
u=0}}var i=250,k=16,r={MEDIA_ERR_ABORTED:1,MEDIA_ERR_NETWORK:2,MEDIA_ERR_DECODE:3,MEDIA_ERR_SRC_NOT_SUPPORTED:4},n,l=this,q={q:[],queue:function(j){this.q.push(j);this.process()},process:function(){if(z)for(;this.q.length;)this.q.shift()()}},u,e,z,v=document.createElement("iframe"),A={error:null,src:l.src,NETWORK_EMPTY:0,NETWORK_IDLE:1,NETWORK_LOADING:2,NETWORK_NO_SOURCE:3,networkState:0,HAVE_NOTHING:0,HAVE_METADATA:1,HAVE_CURRENT_DATA:2,HAVE_FUTURE_DATA:3,HAVE_ENOUGH_DATA:4,readyState:0,seeking:false,
currentTime:0,duration:NaN,paused:true,ended:false,autoplay:false,loop:false,volume:1,muted:false,width:0,height:0};Popcorn.forEach("error networkState readyState seeking duration paused ended".split(" "),function(j){Object.defineProperty(l,j,{get:function(){return A[j]}})});Object.defineProperties(l,{src:{get:function(){return A.src},set:function(j){A.src=j;l.load()}},currentTime:{get:function(){return A.currentTime},set:function(j){q.queue(function(){b("seekTo",j)});A.seeking=true;l.dispatchEvent("seeking")}},
autoplay:{get:function(){return A.autoplay},set:function(j){A.autoplay=!!j}},loop:{get:function(){return A.loop},set:function(j){A.loop=!!j;q.queue(function(){b("setLoop",loop)})}},volume:{get:function(){return A.volume},set:function(j){A.volume=j;q.queue(function(){b("setVolume",A.muted?0:A.volume)});l.dispatchEvent("volumechange")}},muted:{get:function(){return A.muted},set:function(j){A.muted=!!j;q.queue(function(){b("setVolume",A.muted?0:A.volume)});l.dispatchEvent("volumechange")}},width:{get:function(){return v.width},
set:function(j){v.width=j}},height:{get:function(){return v.height},set:function(j){v.height=j}}});var a={getCurrentTime:function(j){A.currentTime=parseFloat(j.value)},getDuration:function(j){A.duration=parseFloat(j.value);if(!isNaN(A.duration)){A.readyState=4;l.dispatchEvent("durationchange");l.dispatchEvent("loadedmetadata");l.dispatchEvent("loadeddata");l.dispatchEvent("canplay");l.dispatchEvent("canplaythrough")}},getVolume:function(j){A.volume=parseFloat(j.value)}},d={ready:function(){b("addEventListener",
"loadProgress");b("addEventListener","playProgress");b("addEventListener","play");b("addEventListener","pause");b("addEventListener","finish");b("addEventListener","seek");b("getDuration");z=true;q.process();l.dispatchEvent("loadstart")},loadProgress:function(j){l.dispatchEvent("progress");A.duration=parseFloat(j.data.duration)},playProgress:function(j){A.currentTime=parseFloat(j.data.seconds)},play:function(){if(A.seeking){A.seeking=false;l.dispatchEvent("seeked")}A.paused=false;A.ended=false;f();
l.dispatchEvent("play")},pause:function(){A.paused=true;h();l.dispatchEvent("pause")},finish:function(){A.ended=true;h();l.dispatchEvent("ended")},seek:function(j){A.currentTime=parseFloat(j.data.seconds);A.seeking=false;A.ended=false;l.dispatchEvent("timeupdate");l.dispatchEvent("seeked")}};l.load=function(){z=false;n=Popcorn.guid();var j=p(A.src),o={},s=[],x={api:1,player_id:n};if(g(l.nodeName,j.source)){Popcorn.extend(o,m);Popcorn.extend(o,j.queryKey);Popcorn.extend(o,x);j="http://player.vimeo.com/video/"+
/\d+$/.exec(j.path)+"?";for(var w in o)o.hasOwnProperty(w)&&s.push(encodeURIComponent(w)+"="+encodeURIComponent(o[w]));j+=s.join("&");A.loop=!!j.match(/loop=1/);A.autoplay=!!j.match(/autoplay=1/);v.width=l.style.width?l.style.width:500;v.height=l.style.height?l.style.height:281;v.frameBorder=0;v.webkitAllowFullScreen=true;v.mozAllowFullScreen=true;v.allowFullScreen=true;v.src=j;l.appendChild(v)}else{j=A.MEDIA_ERR_SRC_NOT_SUPPORTED;A.error={};Popcorn.extend(A.error,r);A.error.code=j;l.dispatchEvent("error")}};
l.unload=function(){h();window.removeEventListener("message",c,false)};l.play=function(){q.queue(function(){b("play")})};l.pause=function(){q.queue(function(){b("pause")})};setTimeout(function(){window.addEventListener("message",c,false);l.load()},0)},_teardown:function(){this.unload&&this.unload()}})})();(function(p,g){p.onYouTubePlayerAPIReady=function(){onYouTubePlayerAPIReady.ready=true;for(var b=0;b<onYouTubePlayerAPIReady.waiting.length;b++)onYouTubePlayerAPIReady.waiting[b]()};if(p.YT){p.quarantineYT=p.YT;p.YT=null}onYouTubePlayerAPIReady.waiting=[];var m=false;g.player("youtube",{_canPlayType:function(b,c){return typeof c==="string"&&/(?:http:\/\/www\.|http:\/\/|www\.|\.|^)(youtu)/.test(c)&&b.toLowerCase()!=="video"},_setup:function(b){if(!p.YT&&!m){m=true;g.getScript("//youtube.com/player_api")}var c=
this,f=false,h=document.createElement("div"),i=0,k=true,r=false,n=0,l=false,q=100,u=g.player.playerQueue(),e=function(){g.player.defineProperty(c,"currentTime",{set:function(v){if(!b.destroyed){v=Number(v);if(!isNaN(v)){i=v;r=true;c.dispatchEvent("seeking");b.youtubeObject.seekTo(v)}}},get:function(){return i}});g.player.defineProperty(c,"paused",{get:function(){return k}});g.player.defineProperty(c,"muted",{set:function(v){if(b.destroyed)return v;if(b.youtubeObject.isMuted()!==v){v?b.youtubeObject.mute():
b.youtubeObject.unMute();l=b.youtubeObject.isMuted();c.dispatchEvent("volumechange")}return b.youtubeObject.isMuted()},get:function(){if(b.destroyed)return 0;return b.youtubeObject.isMuted()}});g.player.defineProperty(c,"volume",{set:function(v){if(b.destroyed)return v;if(b.youtubeObject.getVolume()/100!==v){b.youtubeObject.setVolume(v*100);q=b.youtubeObject.getVolume();c.dispatchEvent("volumechange")}return b.youtubeObject.getVolume()/100},get:function(){if(b.destroyed)return 0;return b.youtubeObject.getVolume()/
100}});c.play=function(){if(!b.destroyed){k=false;u.add(function(){if(b.youtubeObject.getPlayerState()!==1){r=false;b.youtubeObject.playVideo()}else u.next()})}};c.pause=function(){if(!b.destroyed){k=true;u.add(function(){b.youtubeObject.getPlayerState()!==2?b.youtubeObject.pauseVideo():u.next()})}}};h.id=c.id+g.guid();b._container=h;c.appendChild(h);var z=function(){var v,A,a,d,j=true,o=0.1,s=function(){if(!b.destroyed){var F=b.youtubeObject.getCurrentTime();if(r)if(i>=F-o&&i<=F+o){r=false;o=0.1;
c.dispatchEvent("seeked")}else{o*=2;b.youtubeObject.seekTo(i)}else i=F;c.dispatchEvent("timeupdate");setTimeout(s,200)}},x=function(F){var C=b.youtubeObject.getDuration();if(isNaN(C)||C===0)setTimeout(function(){x(F*2)},F*1E3);else{c.duration=C;c.dispatchEvent("durationchange");c.dispatchEvent("loadedmetadata");c.dispatchEvent("loadeddata");c.readyState=4;s();c.dispatchEvent("canplay");c.dispatchEvent("canplaythrough")}};b.controls=+b.controls===0||+b.controls===1?b.controls:1;b.annotations=+b.annotations===
1||+b.annotations===3?b.annotations:1;v=/^.*(?:\/|v=)(.{11})/.exec(c.src)[1];A=(c.src.split("?")[1]||"").replace(/v=.{11}/,"");A=A.replace(/&t=(?:(\d+)m)?(?:(\d+)s)?/,function(F,C,D){C|=0;D|=0;n=+D+C*60;return""});A=A.replace(/&start=(\d+)?/,function(F,C){C|=0;n=C;return""});f=/autoplay=1/.test(A);A=A.split(/[\&\?]/g);a={wmode:"transparent"};for(var w=0;w<A.length;w++){d=A[w].split("=");a[d[0]]=d[1]}b.youtubeObject=new YT.Player(h.id,{height:"100%",width:"100%",wmode:"transparent",playerVars:a,videoId:v,
events:{onReady:function(){q=c.volume;l=c.muted;B();k=c.paused;e();b.youtubeObject.playVideo();c.currentTime=n;c.dispatchEvent("loadstart")},onStateChange:function(F){if(!(b.destroyed||F.data===-1))if(F.data===2){k=true;c.dispatchEvent("pause");u.next()}else if(F.data===1&&!j){k=false;c.dispatchEvent("play");c.dispatchEvent("playing");u.next()}else if(F.data===0)c.dispatchEvent("ended");else if(F.data===1&&j){j=false;if(f||!c.paused)k=false;k&&b.youtubeObject.pauseVideo();x(0.025)}},onError:function(F){if([2,
100,101,150].indexOf(F.data)!==-1){c.error={customCode:F.data};c.dispatchEvent("error")}}}});var B=function(){if(!b.destroyed){if(l!==b.youtubeObject.isMuted()){l=b.youtubeObject.isMuted();c.dispatchEvent("volumechange")}if(q!==b.youtubeObject.getVolume()){q=b.youtubeObject.getVolume();c.dispatchEvent("volumechange")}setTimeout(B,250)}}};onYouTubePlayerAPIReady.ready?z():onYouTubePlayerAPIReady.waiting.push(z)},_teardown:function(b){b.destroyed=true;var c=b.youtubeObject;if(c){c.stopVideo();c.clearVideo&&
c.clearVideo()}this.removeChild(document.getElementById(b._container.id))}})})(window,Popcorn);
